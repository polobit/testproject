<?xml version="1.0" encoding="UTF-8"?>
<Module>
	<ModulePrefs title="AgileCRM" description="Built with Love for Small Businesses"
		height="100" author="" author_email="" author_location="">

		<!-- Declare feature dependencies. -->

		<!-- This one is not specific to Gmail contextual gadgets. -->
		<Require feature="dynamic-height" />

		<!-- The next feature, google.contentmatch, is required for all Gmail contextual 
			gadgets. <Param> - specify one or more comma-separated extractor IDs in a 
			param named "extractors". This line is overridden by the extractor ID in 
			the manifest, but is still expected to be present. -->
		<Require feature="google.contentmatch">
			<Param name="extractors">
				538277326378:Agile,google.com:EmailAddressExtractor
			</Param>
		</Require>

		<!-- Single Sign on -->
		<Require feature="opensocial-0.9" /> 
		<Require feature="osapi" />

	</ModulePrefs>

	<!-- Define the content type and display location. The settings "html" and 
		"card" are required for all Gmail contextual gadgets. -->
	<Content type="html" view="card">
    <![CDATA[
      
    <link rel="stylesheet" type="text/css" href="https://googleapps.agilecrm.com/css/bootstrap-pink.min.css" />
    <link rel="stylesheet" type="text/css" href="https://googleapps.agilecrm.com/css/lib/datepicker-min.css" />
    <link rel="stylesheet" type="text/css" href="https://googleapps.agilecrm.com/css/bootstrap-responsive.min.css" />
    <style>
		.error{color:red;}
		.field_req {color: red;}
		legend {font-size: 16px; margin-bottom: 10px; line-height: 20px;}
		fieldset {margin-top:15px;}
		input {height:22px !important; padding: 0px 4px !important;}
		select {height:22px; padding:0px;}
    </style>
    
	<div class="container-fluid">
		<div id="content" class="row">
			<br/>
			<img id="loading" style="padding-right:5px;display:none;width:25px;" src="https://googleapps.agilecrm.com/img/21-0.gif"></img>
		</div>
    </div>
   	
	<script src='https://googleapps.agilecrm.com/lib/headjs-min.js'></script>
	<script src='https://agile-gmail-gadget.appspot.com/dj-js/agile-gadget.js'></script>
   	
   	<script type="text/javascript">
		init_agile_gadget();   
	</script>
   	
<script id="gadget-template" type="text/html">
	{{#if id}}
		<div class="span8 well well-small gadget_contact_details_tab" style="margin: 0 0 5px 5px;">
	  		<div class="row-fluid gadget_contact"> 
	    		<div class="page-header" style="padding: 0px; border: 1px solid #f5f5f5; margin: 0px;">
					<div style="display:inline;">

<!-- 1st coloum (conatct image) -->					
	    				<div style="display:inline;">
							<div style='display:inline; padding-right:10px; height:auto;'>
								<img  class='thumbnail' src="{{defaultGravatarurl properties 50}}" width="50" height="50" style='display:inline'/>
							</div>
	    				</div>
	    				
<!-- 2nd coloum (conatct details) -->	    				
	    				<div style="margin-top: 0%; min-width:14em; width: 45%; display: inline-block; vertical-align: top;">
							<div style="display:inline-block; max-width: 16em;">
								<div style=" height: auto; text-overflow: ellipsis; white-space: nowrap; overflow: hidden;">
									<b>
										<font size="4">{{getPropertyValue properties "first_name"}} {{getPropertyValue properties "last_name"}}</font>
									</b>
								</div>
							</div>
							<a target="_blank" href="https://{{owner.domain}}.agilecrm.com/#contact/{{id}}" style="margin-left:6px;"><i class="icon-external-link"></i></a><br/>
							{{#if_propertyName "title"}}
								{{value}}
							{{/if_propertyName}}
			
							{{#if_propertyName "company"}}
								, {{value}}
							{{/if_propertyName}}
					
							<div class="add-tag">
								<div style="padding-top:4px;">
									<ul id="added-tags-ul" class="tagsinput" style="display: inline; vertical-align:top; margin-bottom:10px;">
										<li class="tag" style="display: none;">
											<span>
												<span class="anchor tagName" style="float:left;">lead</span>
												<a class="close remove-tag" style="float:left; line-height:16px;">Ã—</a>
											</span>
										</li> 
									</ul>
									<div style="display: inline-block; vertical-align:top;" >
										<form id="addTagsForm" name="add_tags_form" method="post" style="display: none; margin-bottom: 0px; margin-top:1px;">
											<div style="margin-bottom:0px;">
												<input type="hidden" name="email" value='{{#if_propertyName "email"}}{{value}}{{/if_propertyName}}'/>
												<input class="tags-typeahead ignore-comma-keydown input-small" name="tags" type="text" id="tags" style="margin: 0px;" placeholder="Enter tag">
												<a type="submit" class="btn" id="contact-add-tags" style="margin-left: 10px; padding: 1px 10px;">Add</a>
											</div>
										</form>
										<img class="saving" style="display:none; width:25px;" src="https://googleapps.agilecrm.com/img/21-0.gif"></img>
										<i id="add_tags" class="icon-plus toggle-tag" style="cursor:pointer; margin-top:4px; display:block;"></i>
									</div>
								</div>
							</div>
						</div>		

						<div style="display:inline; width:35%; min-width:12em;" class="pull-right">
						
<!-- 4th coloum (options) -->
							<div class="pull-right" style="position:relative; display:inline-block; vertical-align: top;">
								<select class="optionDD" style="width:70px; margin:0px 0px 0px -5px;">
									<option value="New" selected>New..</option>
									<option value="Note">Note</option>
									<option value="Task">Task</option>
									<option value="Deal">Deal</option>
								</select>
							</div>

<!-- 3rd coloum (score/task/options) -->
							<div class="unselectable score-scope pull-right" style="margin-right:10%; display:inline-block;" unselectable="on" onselectstart="return false">
								<ul style="margin:0; list-style-type:none; width:60px; height:auto; display:table; border:1px solid rgba(0, 0, 0, 0.05); box-shadow:inset 0 1px 1px rgba(0, 0, 0, 0.05); border-radius:3px;">
									<li style="text-align:center;">
										<div style="width:56px; margin: 0 auto; border-bottom: 1px solid rgba(0, 0, 0, 0.05);">
											<span style="font-weight:bold; font-size:13px;">Score</span>
										</div>
									</li>
									<li style="line-height:30px;">
										<div style="display:inline; height:auto; width:60px; text-align:center;">
											{{#if lead_score}}
												<div class="score-value" style="display:inline-block; width:55%; font-size:20px; margin-right:-2px; vertical-align:middle; text-align:right;">
													{{lead_score}}
												</div>
											{{else}}
												<div class="score-value" style="display:inline-block; width:55%; font-size:20px; margin-right:-2px; vertical-align:middle; text-align:right;">
													0
												</div>
											{{/if}}
											<ul style="margin:0; list-style-type:none; display:inline-block; width:40%; vertical-align:middle;">
												<input type="hidden" name="email" value='{{#if_propertyName "email"}}{{value}}{{/if_propertyName}}'/>
												<li style="line-height:8px;"><i class="icon-sort-up add-score" style="font-size:14px; cursor:pointer;"></i></li>
												<li style="line-height:8px;"><i class="icon-sort-down subtract-score" style="font-size:14px; cursor:pointer;"></i></li>
											</ul>
										</div>
									</li>
								</ul>
							</div>
						</div>
<!-- end of contact info-->
					</div>
				</div>
			</div>
			
	    	<div class="show_form" class="span9">
<!--  Add Note Form -->
				<div class="gadget-note" style="display:none;">
					<form class='gadget_note_form' name="gadget_note_form" method="post">
						<fieldset>
	                    	<legend><i class="icon-plus-sign"></i> Add Note</legend>
	                    	<input type="hidden" name="email" value='{{#if_propertyName "email"}}{{value}}{{/if_propertyName}}' />
							<div class="row">
								<div class="span3">
		                    		<label class="control-label"><b>Subject: </b><span class="field_req">*</span></label>
									<div class="controls">
										<input type="text" placeholder="About" name="subject" id="subject" class="required"/>
									</div>
								</div>
							</div>
							<div class="row">
								<div class="span3">
		                    		<label class="control-label"><b>Description:</b> <span class="field_req">*</span></label>
									<div class="controls">
										<textarea rows="3" placeholder="Detailed Note" name="description" id="description" class="required"></textarea> 
									</div>
								</div>
							</div>
	                    	<div class="form-actions" style="padding: 10px 0px 0px 0px; margin:0px;">
								<a type="submit" class="btn btn-primary gadget-note-validate" style="padding:2px 6px 2px;">Add Note</a>
								<a class="cancel btn" style="padding:2px 6px 2px;">Cancel</a>
								<img class="saving" style="padding-right:5px;display:none;width:25px;" src="https://googleapps.agilecrm.com/img/21-0.gif"></img>
								<span class="status" style="display:none;"><i>Successfully Saved</i></span> 
	                  		</div>
						</fieldset>
					</form>
			 	</div>
<!--  Add Task Form -->
	  	   		<div class="gadget-task" style="display:none;">
	           		<form class='gadget_task_form' name="gadget_task_form" method="post">
						<fieldset>
	                    	<legend><i class="icon-plus-sign"></i> Add Task</legend>
	                        <input type="hidden" name="email" value='{{#if_propertyName "email"}}{{value}}{{/if_propertyName}}' />
							<div class="row">
								<div id="addTask" class="span3">
									<label for="subject" class="control-label"> <b>Task:</b> <span class="field_req">*</span></label>
									<div class="controls"><span class="input "><input id="subject" type="text" placeholder="Task name"
								  		  name="subject" size="40" class="required"> </span>
								  	</div>
								</div>
								<div id="taskCategory" class="span2">					
									<label for="type" class="control-label"><b> Category: </b><span class="field_req">*</span></label>
									<div class="controls">
										<span class="input">
											<select name="type" id="type" size="1" class="input-small required">
												<option value="">Select</option>
												<option value="CALL">Call</option>
												<option value="EMAIL">Email</option>
												<option value="FOLLOW_UP">Follow-up</option>
												<option value="MEETING">Meeting</option>
												<option value="MILESTONE">Milestone</option>
												<option value="SEND">Send</option>
												<option value="TWEET">Tweet</option>
											</select>
										</span>
									</div>
								</div>
						  	</div>
						    <div class="row">
						    	<div class="span3">
									<label for="due" class="control-label"><b>Date (Due): </b><span class="field_req">*</span></label>
									<div class="controls">
										<input type="text" name="due" placeholder="MM-DD-YYYY" id="task-date-1" class="required">
									</div>
								</div>
								<div class="span2">
									<label for="priority_type" class="control-label"><b>Priority: </b></label>
									<div class="controls"> 
										<span class="input ">
											<select	name="priority_type" id="priority_type" size="1" class="input-small">
												<option value="HIGH">High</option>
												<option value="NORMAL" selected="selected">Normal</option>
												<option value="LOW">Low</option>
											</select> 
										</span>
									</div>
								</div>
							</div> 
	                        <div  class="form-actions" style="padding:10px 0px 0px 0px; margin:0px;">
								<a type="submit" class="btn btn-primary gadget-task-validate" style="padding:2px 6px 2px;">Add Task</a>
								<a class="cancel btn" style="padding:2px 6px 2px;">Cancel</a>
								<img class="saving" style="padding-right:5px;display:none;width:25px;" src="https://googleapps.agilecrm.com/img/21-0.gif"></img>
								<span class="status" style="display:none;"><i>Successfully Saved</i></span>
	                        </div>
						</fieldset>				
					</form>	
	        	</div>
<!--  Add Deal Form -->
	  	   		<div class="gadget-deal" style="display:none;">
					<form class="gadget_deal_form" name="gadget_deal_form" method="post">
			  			<fieldset>
	                    	<legend><i class="icon-plus-sign"></i> Add Deal</legend>
	                    	<input type="hidden" name="email" value='{{#if_propertyName "email"}}{{value}}{{/if_propertyName}}' />
							<div class="row">	
								<div class="span3">		
									<label class="control-label"><b>Name: </b> <span class="field_req">*</span></label>
									<div class="controls">
										<input id="name" name="name" type="text" class=" required" placeholder="Name of deal"/>
				  					</div>
								</div>
							</div>
	                   		<div class="row">
						  		<div class="span3">
	               					<label class="control-label"><b>Value: </b> <span class="field_req">*</span></label>
	                				<div class="controls"> 
										<input type="text" name="expected_value" class="input-small required  digits" placeholder="Value of deal"/>
									</div>
						  		</div>
						  		<div class="span2">				
									<label class="control-label"><b>Milestone: </b> <span class="field_req">*</span></label>
									<div class="controls">
										<select id="milestone" name="milestone" class="input-small required" 
												Style="width:100px">
											<option value="">Select</option>
			                                <option value="Open">Open</option>
											<option value="Won">Won</option>
			                                <option value="Stage 1">Stage 1</option>
			                                <option value="Lost">Lost</option>
										</select>	
						  			</div>
						 		</div>
	                    	</div>
	                    	<div class="row">
						  		<div class=" span3">	
									<label class="control-label"><b>Probability (%): </b> <span class="field_req">*</span></label>
									<div class="controls">
										<input type="text" id="probability" name="probability" class="input-small required digits" max="100" placeholder="Probability %"/>				
						  			</div>
								</div>
								<div class=" span2">
									<label class="control-label"><b>Close Date: </b> <span class="field_req">*</span></label>
									<div class="controls">
										<input id="close_date" type="text" name="close_date" class="input required" placeholder="MM/DD/YY"/>				
									</div>
								</div>
	                    	</div>
		                    <div class="form-actions" style="padding:10px 0px 0px 0px; margin:0px;">
		                        <a type="submit" class="btn btn-primary gadget-deal-validate" style="padding:2px 6px 2px;">Add Deal</a> 
					            <a class="cancel btn" style="padding:2px 6px 2px;">Cancel</a>
					            <img class="saving" style="padding-right:5px;display:none;width:25px;" src="https://googleapps.agilecrm.com/img/21-0.gif"></img>
		                        <span class="status" style="display:none;"><i>Successfully Saved</i></span>
							</div>
			  			</fieldset>
					</form>
				</div>
			</div>
		</div>
	{{else}}
<!-- add contact forms -->
		<div class="span8 well well-small gadget_contact_details_tab" style="margin: 0 0 5px 5px;">
	    	<div class="show_form">
		        {{#if fname}}
					<div class="gadget-no-contact">
						<a class="gadget-add-contact" style="cursor:pointer; margin:0px 5px;"><i class="icon-plus"></i><span>&nbsp;Add</span></a> {{fname}} {{lname}} ({{email}}) to Agile Contacts - this would be simple
					</div>
				{{else}}
					<div class="gadget-no-contact">
						<a class="gadget-add-contact" style="cursor:pointer; margin:0px 5px;"><i class="icon-plus"></i><span>&nbsp;Add</span></a> {{email}} to Agile Contacts - this would be simple
					</div>
				{{/if}}
	        	<div class="gadget-contact" style="display:none;">
					<form class='gadget_contact_form' name="gadget_contact_form" method="post">
				  		<fieldset style="margin:0px;">
		                	<legend><i class="icon-plus-sign"></i> Add Contact To Agile CRM</legend>
							<div class="control-group" style="margin:0px;">
		                		<label class="control-label"><b>Name:</b> <span class="field_req">*</span></label>
						  		<div class="row">
									<span class="controls  span3">
							   			{{#if fname}}
							   				<input name="first_name" type="text" class="required" id="fname" placeholder="First name" value="{{fname}}"/>
										{{else}}
											<input name="first_name" type="text" class="required" id="fname" placeholder="First name"/>
										{{/if}}
									</span>
						    		<span class="controls span2">
							    		{{#if lname}}
								    		<input name="last_name" class="required" type="text"	id="lname" placeholder="Last name" value="{{lname}}"/>
										{{else}}
											<input name="last_name" class="required" type="text"	id="lname" placeholder="Last name"/>
										{{/if}}	
									</span>
						  		</div>
					    	</div>
					    
							<div class="row">
	                  			<div class="span3">
		                   			<label class="control-label"><b>Email:</b> </label>
									<div class="controls">
										 <span><input name="email" type="text" id="email" placeholder="Email" value = "{{email}}"/></span>
									</div>
					  			</div>
		                  		<div class="span2">
			                   		<label class="control-label"><b>Tags:</b> </label>
									<div class="controls">
										 <span><input name="tags" type="text" id="tags" placeholder="Tags"/></span>
									</div>
						    	</div>
					    	</div>
		                	<div class="row">
								<div class="span3">
				                   	<label class="control-label"><b>Company:</b></label>
									<div class="controls">
										<input name="company" type="text" id="contact_company" placeholder="Company" />
									</div>
						  		</div>
						  		<div class="span3">
			                   		<label class="control-label"><b>Job Description:</b></label>
									<div class="controls">
										<input name="title" type="text" id="job_title" placeholder="Job title" />
									</div>
							  	</div>
		                	</div>
		                	<div class="form-actions" style="padding:10px 0px 0px 0px; margin:0px;">
								<a type="submit" class="btn btn-primary gadget-contact-validate" style="padding:2px 6px 2px;">Add Contact</a>
								<a class="cancel btn" style="padding:2px 6px 2px;">Cancel</a>
								<img class="saving" style="padding-right:5px;display:none;width:25px;" src="https://googleapps.agilecrm.com/img/21-0.gif"></img>
								<span class="status" style="display:none;"><i>Successfully Saved</i></span>
			               	</div>
						</fieldset>
		  			</form>
				</div>
			</div>
		</div>
	{{/if}}
</script>
	
	<div id="output" style="margin:0 0 5px 5px;"></div>
]]>
</Content>
</Module>