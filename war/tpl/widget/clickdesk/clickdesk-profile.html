<script id="clickdesk-login-template" type="text/html">
	<div display:inline;  line-height:12px;word-wrap: break-word;">
		<form class="widget_content" style="border-bottom:none;" id="clickdesk_login_form" name="clickdesk_login_form" method="post">
	    	<fieldset>
				<p style='line-height:140%;'>Convert chat sessions with potential customers into contacts in Agile along with the conversation.</p>
				<p>
				<label>Enter your ClickDesk details </label>
				<div class="control-group" style="margin-bottom:0px"><div class="controls"><input type="text" id="clickdesk_username" class="input-medium required widget_input_box" style="width:90%" placeholder="User Name" value="" name="username"></input></div></div>
				<div class="control-group"><div class="controls"><input type="text" id="clickdesk_api_key" class="input-medium required widget_input_box" style="width:90%" placeholder="API Key" value="" name="api_key"></input><br/></div></div>			
				</p>
				<a href="#" id="save_clickdesk_prefs" class="btn btn-primary" style="text-decoration:none;cursor:pointer;">Save</a>
				<a href="#add-widget" class="btn ml_5" style="text-decoration:none;">Cancel</a>
			 </fieldset>
	    </form>
	</div>
</script>

<script id="clickdesk-profile-template" type="text/html">
<p class="widget_content" style="margin:0px 0px 10px 0px;font-size:13px;">Conversations and tickets related to {{getCurrentContactProperty "first_name"}} {{getCurrentContactProperty "last_name"}}</p>
<ul class="nav nav-tabs clickdeskTab" id="myTab">
	<li class="active" style="width:48%; margin-left: 2%; text-align: center;" align="center"><a data-toggle="tab" href="#chats" id="clickdesk_chats"><h4>Chats</h4><small></small></a></li>
	<li style="width:48%;text-align: center;" align="center"><a data-toggle="tab" href="#c_tickets" id="clickdesk_tickets"><h4>Tickets</h4><small></small></a></li>
</ul>
<div class="tab-content" id="myTabContent">
	<div id="chats" class="tab-pane fade active in">
		<ul class="widget_tab_content clickdesktab-content" id="clickdesk_chats_panel">
						
		</ul>
		<div class="clearfix" id="clickdesk-chats-error-panel" style="display:none;">
		</div>
		<div class="widget_tab_footer" align="center">
			<a class="more_chats_link" id="more_chats_link" style="cursor: pointer;" rel="tooltip" title="Click to see more chats">Show More</a>
			<a data-toggle="collapse" data-target="#clickdesk_chats_panel" id="less_chats_link" style="display:none;cursor:pointer;">Show Less..</a>
			<img src="img/ajax-spinner.gif" id="spinner-clickdesk-chats" style="display:none;"></img>
		</div>
	</div>
	<div id="c_tickets" class="tab-pane fade">
		<ul class="widget_tab_content" id="clickdesk_tickets_panel">
						
		</ul>
		<div class="clearfix" id="clickdesk-tickets-error-panel" style="display:none;">
		</div>
		<div class="widget_tab_footer" align="center">
			<a class="more_tickets_link" id="more_tickets_link" style="cursor: pointer;" rel="tooltip" title="Click to see more tickets">Show More</a>
			<a data-toggle="collapse" data-target="#clickdesk_tickets_panel" id="less_tickets_link" style="display:none;cursor:pointer;">Show Less..</a>
			<img src="img/ajax-spinner.gif" id="spinner-clickdesk-tickets" style="display:none;"></img>
		</div>
	</div>
</div>
</script>

<script id="clickdesk-chat-stream-template" type="text/html">
	{{#if this}}
		{{#each this}}
			<li class="sub_header_li clickdesk_chat_hover" url="{{chat_history_url}}">
				<div class="overflow-elipsis" title="{{user_message}}"><a href="{{chat_history_url}}" target="_blank" >{{user_message}}</a></div>
				<div style="margin-bottom:5px;">
					<div class="label right">{{chat_type}}</div>
					<small><time class="time-ago" datetime="{{epochToHumanDate "" start_time}}">{{epochToHumanDate "ddd mmm dd yyyy HH:MM:ss" start_time}}</time></small>
				</div>
				<div class="sub_header_tab_link clickdesk_chat_tab_link" style="float:left;margin:0px;display:none;">
					<div><a url="{{chat_history_url}}" id="clickdesk_chat_show" style="cursor: pointer;" rel="tooltip" title="Show chat transcript" data-attr="{{bindData this}}">Show</a></div>
				</div>
			</li>
		{{/each}}
	{{/if}}
</script>

<script id="clickdesk-ticket-stream-template" type="text/html">
	{{#each this}}
		<li class="sub_header_li clickdesk_ticket_hover" url="{{ticket_url}}">
			<div class="overflow-elipsis" title="{{subject}}"><a href="{{ticket_url}}" target="_blank" >{{subject}}</a></div>
			<div style="margin-bottom:5px;">
				<div class="label right">{{status}}</div>
				<small><time class="time-ago" datetime="{{epochToHumanDate "" received_at}}">{{epochToHumanDate "ddd mmm dd yyyy HH:MM:ss" received_at}}</time></small>
			</div>
			<div class="sub_header_tab_link clickdesk_ticket_tab_link" style="float:left;margin:0px;display:none;">
				<div><a url="{{ticket_url}}" id="clickdesk_ticket_show" style="cursor: pointer;" rel="tooltip" title="Show more information of ticket" data-attr="{{bindData this}}">Show</a></div>
			</div>
		</li>
	{{/each}}
</script>

<script id="clickdesk-error-template" type="text/html">
{{#check_length message "140"}}
	<div class="ellipsis-multi-line collapse-25" title="{{message}}" style="height:110px;overflow: hidden;line-height:160%;word-wrap: break-word;padding:0px 0px 10px">
		{{{message}}}
	</div>
{{else}}
	<div style="line-height:160%;word-wrap: break-word;padding:0px 0px 10px">
		{{{message}}}
	</div>
{{/check_length}}
</script>

<script id="clickdesk-show-chat-template" type="text/html">
	<div class="modal hide fade message-modal" id="clickdesk_chat_showModal" style="width:400px; left:55%">
	    <div class="modal-header">
	        <button class="close" data-dismiss="modal">x</button>
			<h3><i class="icon-info-sign"></i> Chat Transcript</h3>			
	    </div>
	    <div class="well" style="margin-bottom:0px;">
	        <table class="row-fluid table table-bordered" style="line-height:13px;margin-bottom:5px;word-wrap: break-word; table-layout:fixed;width:100%;">
						<tr><th style="padding: 5px;">Visitor Name</th>
							<td style="padding: 5px;">{{name}}</td>
						</tr>
						<tr><th style="padding: 5px;">Visitor Email</th>
							<td style="padding: 5px;">{{email}}</td>
						</tr>
						<tr>
							<th style="padding: 5px;">First Message</th>
							<td style="padding: 5px;">{{user_message}}</td>
						</tr>
						<tr>
							<th style="padding: 5px;">Chat History URL</th>
							<td style="padding: 5px;"><a href="{{chat_history_url}}" target="_blank">{{chat_history_url}}</a></td>
						</tr>	
						<tr>
							<th style="padding: 5px;">Started At</th>
							<td style="padding: 5px;"><time class="time-ago" datetime="{{epochToHumanDate "" start_time}}">{{epochToHumanDate "ddd mmm dd yyyy HH:MM:ss" start_time}}</time></td>
						</tr>
						<tr>
							<th style="padding: 5px;">Ended At</th>
							<td style="padding: 5px;"><time class="time-ago" datetime="{{epochToHumanDate "" end_time}}">{{epochToHumanDate "ddd mmm dd yyyy HH:MM:ss" end_time}}</time></td>
						</tr>	
						<tr>
							<th style="padding: 5px;">Status</th>
							<td style="padding: 5px;">{{status}}</td>
						</tr>
						<tr>
							<th style="padding: 5px;">Initiated Chat Type</th>
							<td style="padding: 5px;">{{initiated_chat_type}}</td>
						</tr>	
						<tr>
							<th style="padding: 5px;">Chat Type</th>
							<td style="padding: 5px;">{{chat_type}}</td>
						</tr>
						<tr>
							<th style="padding: 5px;">IM type</th>
							<td style="padding: 5px; ">{{im_type}}</td>
						</tr>
						<tr>
							<th style="padding: 5px;">Closed By</th>
							<td style="padding: 5px;">{{closed_by}}</td>
						</tr>
						<tr>
							<th style="padding: 5px;">Duration</th>
							<td style="padding: 5px;">{{millSecondsToMinutes duration}}</td>
						</tr>
						<tr>
							<th style="padding: 5px;">Chat Length</th>
							<td style="padding: 5px;">{{chat_length}}</td>
						</tr>
						<tr>
							<th style="padding: 5px;">Department Name</th>
							<td style="padding: 5px;">{{widget_name}}</td>
						</tr>
			</table>
	    </div>
	</div>
</script>

<script id="clickdesk-show-ticket-template" type="text/html">
	<div class="modal hide fade message-modal" id="clickdesk_ticket_showModal" style="width:400px; left:55%">
	    <div class="modal-header">
	        <button class="close" data-dismiss="modal">x</button>
			<h3><i class="icon-info-sign"></i> Ticket</h3>			
	    </div>
	    <div class="well" style="margin-bottom:0px;">
	        <table class="row-fluid table table-bordered" style="line-height:13px;margin-bottom:5px;word-wrap: break-word; table-layout:fixed;width:100%;">
						<tr><th style="padding: 5px;">From</th>
							<td style="padding: 5px;">{{from}}</td>
						</tr>
						<tr><th style="padding: 5px;">Created By</th>
							<td style="padding: 5px;">{{from_name}}</td>
						</tr>	
						<tr>
							<th style="padding: 5px;">Subject</th>
							<td style="padding: 5px;">{{subject}}</td>
						</tr>
						<tr>
							<th style="padding: 5px;">Ticket URL</th>
							<td style="padding: 5px; "><a href="{{ticket_url}}" target="_blank">{{ticket_url}}</a></td>
						</tr>
						<tr>
							<th style="padding: 5px;">Priority</th>
							<td style="padding: 5px;">{{priority}}</td>
						</tr>
						<tr>
							<th style="padding: 5px;">Status</th>
							<td style="padding: 5px;">{{status}}</td>
						</tr>				
						<tr>
							<th style="padding: 5px;">Created At</th>
							<td style="padding: 5px;"><time class="time-ago" datetime="{{epochToHumanDate "" received_at}}">{{epochToHumanDate "ddd mmm dd yyyy HH:MM:ss" received_at}}</time></td>
						</tr>
						<tr>
							<th style="padding: 5px;">Updated At</th>
							<td style="padding: 5px;"><time class="time-ago" datetime="{{epochToHumanDate "" updated_at}}">{{epochToHumanDate "ddd mmm dd yyyy HH:MM:ss" updated_at}}</time></td>
						</tr>
						<tr>
							<th style="padding: 5px;">Department</th>
							<td style="padding: 5px;">{{widget_name}}</td>
						</tr>
						<tr>
							<th style="padding: 5px;">Agent Name</th>
							<td style="padding: 5px;">{{agent_name}}</td>
						</tr>
						<tr>
							<th style="padding: 5px;">Asignee Type</th>
							<td style="padding: 5px;">{{assignee_type}}</td>
						</tr>
						<tr>
							<th style="padding: 5px;">Channel</th>
							<td style="padding: 5px;">{{channel}}</td>
						</tr>
			</table>
	    </div>
	</div>
</script>
