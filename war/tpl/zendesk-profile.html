<script id="zendesk-profile-template" type="text/html">
<div class="widget_content row-fluid">
	{{#if user_info.photo.content_url}}
		<div class="span3"><img src="{{user_info.photo.content_url}}" width="36" height="36" alt="" class="img-rounded pull-left"/></div>
	{{else}}
		<div class="span3"><img src="{{defaultGravatarurl 36}}" width="36" height="36" alt="" class="img-rounded pull-left"/></div>
	{{/if}}
	<div class="pull-left ml_5 span8">
		{{#if user_info.name}}
			<p class="title_txt">{{user_info.name}}</p>
		{{else}}
			<p class="title_txt">{{user_info.email}}</p>
		{{/if}}
		<p>{{user_info.locale}}</p>
	</div>
	<div class="clearfix"></div>
	<a href="#" class="btn" id="add_ticket"><i class="icon-plus"></i>Add Ticket</a>						
</div>
<ul class="nav nav-tabs row-fluid" id="myTab">
	<li class="active span4"><a data-toggle="tab" href="#tickets_open" id="open_tickets"><h3>open</h3></a></li>
	<li class="span4"><a data-toggle="tab" href="#tickets_solved" id="solved_tickets"><h3>solved</h3></a></li>
	<li class="span4"><a data-toggle="tab" href="#tickets_closed" id="closed_tickets"><h3>closed</h3></a></li>
</ul>
<div class="tab-content" id="myTabContent">
	<div id="tickets_open" class="tab-pane fade active in">
		
		<ul class="widget_tab_content"  id="open_tickets_panel">
					
		</ul>
	</div>
	<div id="tickets_solved" class="tab-pane fade active in">
		
		<ul class="widget_tab_content"  id="solved_tickets_panel">
					
		</ul>
	</div>
	<div id="tickets_closed" class="tab-pane fade active in">
		
		<ul class="widget_tab_content"  id="closed_tickets_panel">
					
		</ul>
	</div>
</div>
</script>

<script id="zendesk-ticket-stream-template" type="text/html">
{{#isArray this}}
	{{#each this}}
		<li class="" id="{{id}}">
			{{subject}}<br>
			<small><time class="time-ago" datetime="{{created_at}}">{{created_at}}</time></small><br>
			<ul class="widget_tab_link" style="float:left;margin:0px">
				<li><a href="{{url}}" target="_blank" rel="tooltip" title="Link to ticket in zendesk">Link</a></li>
				<li><a class="l_border" href="#show" {{bindData this}} ticket_status="{{status}}" ticket_id="{{id}}" id="ticket_show" rel="tooltip" title="Show more information of ticket">Show</a></li>
				<li><a class="l_border" href="#update" update_id="{{id}}" id="ticket_update" rel="tooltip" title="Update ticket in zendesk">Comment</a></li>										
			</ul>
		</li>
	{{/each}}
{{else}}
	<li>{{this}}</li>
{{/isArray}}
</script>

<script id="zendesk-login-template" type="text/html">
	<div display:inline;  line-height:12px;word-wrap: break-word;">
		<form class="widget_content" style="border-bottom:none;" id="zendesk_login_form" name="zendesk_login_form" method="post">
	    	<fieldset>
				<p style='line-height:140%;'>A ticketing system built for speed automatic actions, meaningful organization, and streamlined systems for managing support content.</p>
				<input type="text" id="zendesk_username" class="input-medium required ml_5" placeholder="User Name" value="" name="username"></input>
				<input type="password" id="zendesk_password" class="input-medium required ml_5" placeholder="Password" value="" name="password"></input>
				<input type="text" id="zendesk_url" class="input-medium required ml_5" placeholder="url" value="" name="url"></input><br/>
				<button id="save_prefs" class="btn ml_5"><a href="#">Save</a></button>
			 </fieldset>
	    </form>
	</div>
</script>

<script id="zendesk-message-template" type="text/html">
	<!-- New (Note) Modal views -->
	<div class="modal hide fade message-modal" id="zendesk_messageModal" style="width:400px; left:55%">
	    <div class="modal-header">
	        <button class="close" data-dismiss="modal">x</button>
			{{#if_equals headline "Add Ticket"}}
	        	<h3><i class="icon-plus-sign"></i> {{headline}}</h3>
			{{else}}
				<h3><i class="icon-edit"></i> {{headline}}</h3>
			{{/if_equals}}
	    </div>
	    <div class="modal-body agile-modal-body">
	        <form id="zendesk_messageForm" name="zendesk_messageForm" method="post">
	            <fieldset>
					<div style="margin-bottom:10px;">{{info}}</div>
					<input name="name" type="hidden" value="{{name}}" />
	                <input name="email" type="hidden" value="{{email}}" />
	                <div class="control-group">	                    
	                    <div class="controls">
							{{#if_equals headline "Update Ticket"}}	                        
								<input type="hidden" placeholder="Ticket Id" name="ticketNumber" id="ticketNumber" class="required span4" value="{{id}}"/>
							{{else}}
								<label class="control-label"><b>Subject: </b><span class="field_req">*</span></label>	                        
								<input type="text" placeholder="Subject" name="subject" id="subject" class="required span4" />
							{{/if_equals}}							
	                    </div>
	                </div>
	                <div class="control-group">
	                    <label class="control-label"><b>Message: </b><span class="field_req">*</span></label>
	                    <div class="controls">
							<textarea rows="4" class="required span4" placeholder="Detailed Message" name="message" id="message" style="max-width:500px;"></textarea>
	                    </div>
	                </div>
	            </fieldset>
	        </form>
	    </div>
	    <div class="modal-footer">
	        <a href="#" class="btn btn-primary" id="send_request">Send</a>
	        <span class="save-status"></span>
	    </div>
	</div>
</script>


<script id="zendesk-ticket-show-template" type="text/html">
	<div class="modal hide fade message-modal" id="zendesk_showModal" style="width:400px; left:55%">
	    <div class="modal-header">
	        <button class="close" data-dismiss="modal">x</button>
			<h3><i class="icon-info-sign"></i> {{headline}}</h3>			
	    </div>
	    <div class="well" style="margin-bottom:0px;">
	        <table class="row-fluid table table-bordered" style="line-height:13px;margin-bottom:5px;word-wrap: break-word; table-layout:fixed;width:100%;">
					
						<tr><th style="padding: 5px;">Ticket ID</th>
							<td style="padding: 5px;">{{id}}</td>
						</tr>					
						<tr>
							<th style="padding: 5px;">Created At</th>
							<td style="padding: 5px;">{{string_to_date "mm-dd-yyyy" created_at}}</td>
						</tr>
						<tr>
							<th style="padding: 5px;">Updated At</th>
							<td style="padding: 5px;">{{string_to_date "mm-dd-yyyy" updated_at}}</td>
						</tr>
						<tr>
							<th style="padding: 5px;">Status</th>
							<td style="padding: 5px;">{{status}}</td>
						</tr>
						<tr>
							<th style="padding: 5px;">Url</th>
							<td style="padding: 5px; "><a href="{{url}}" target="_blank">{{url}}</a></td>
						</tr>
						<tr>
							<th style="padding: 5px;">Subject</th>
							<td style="padding: 5px;">{{subject}}</td>
						</tr>
						<tr>
							<th style="padding: 5px;">Description</th>
							{{#if desc_len}}	
								<td style="padding: 5px;">
									<div style="height: 140px;overflow-y: scroll;"> 
										{{safe_string description}}
									</div>
								</td>
							{{else}}
								<td style="padding: 5px;">{{safe_string description}}</td>
							{{/if}}
						</tr>		
			</table>
	    </div>
	</div>
</script>

