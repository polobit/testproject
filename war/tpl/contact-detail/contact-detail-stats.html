<script id="stats-collection-template" type="text/html">
{{#unless this.length}}
        <div class="slate">
            <div class="slate-content">
                <div class="box-left">
                    <img alt="Clipboard" src="/img/clipboard.png" />
                </div>
                <div class="box-right">
                    <h3>{{contactShortName}} has no web activity.</h3>
                    <div class="text">
						May be {{contactShortName}} did not visit the required page yet.
                    </div>
                </div>
            </div>
        </div>
        {{/unless}}

{{#if this.length}}
<div style="margin-left: 25px">
	<span>
		<h5>
	  	    <a style="text-decoration: none"><b>Initial Referrer URL</b></a><img border="0" src="/img/help.png"
		    style="height: 6px; vertical-align: text-top" rel="popover"
			data-placement="bottom" data-title="Referrer URL"
			data-content="This is the web page from where this contact has come to your website the very first time."
			id="element" data-trigger="hover"> : {{checkOriginalRef "original_ref"}} {{#if this.length}}{{queryWords "original_ref"}}{{/if}}
		</h5>
	</span>	
</div>
	<ul id="stats-model-list" class="ativity-block-ul"></ul>
{{/if}}

</script>

<!-- Web Stats model -->
<script id="stats-model-template" type="text/html">
<div style="display:block;" class="activity">
	<div id="notes" class="activity-text-block">
		<br>
		<h4><b>Page View Analytics</b></h4></br>

        <div style="margin-bottom:5px" id="truncated-webstats">
		    <ul style="list-style: none;">
			    <li class="row-fluid">	
					{{#stringToJSON this "urls_with_time_spent"}}
                    <div class="span2"><b>Pages Visited ({{this.length}})</b>
						<div class="pull-right">:</div>
					</div>
							
					{{#if_more_urls this this.length}}		
						<div class="span9 limited-page-urls" style="margin-left: 10px; word-break: break-all;">
                    		{{#each this.urls}}{{url}} - {{convertSecondsToHour time_spent}}<br/>{{/each}}
						</div>

                     {{else}}
						<div class="span9" style="margin-left: 10px; word-break: break-all;">{{#each this}}{{url}} - {{convertSecondsToHour time_spent}}<br/>{{/each}}</div>
                     {{/if_more_urls}}

                    {{/stringToJSON}}
				</li>
             </ul>  
      	</div>

<div id="complete-webstats" style="display:none;">
		<ul style="list-style: none;">
			<li class="row-fluid">	
					{{#stringToJSON this "urls_with_time_spent"}}
                    <div class="span2"><b>Pages Visited ({{this.length}})</b>
						<div class="pull-right">:</div>
					</div>
							
					<div class="span9" style="margin-left: 10px; word-break: break-all;">
					{{#each this}}{{url}} - {{convertSecondsToHour time_spent}}<br/> {{/each}}
					</div>

                    {{/stringToJSON}}
				</li>  
 
                {{#if ref}}
                <li class="row-fluid">	
					<div class="span2"><b>Referred</b>
						<div class="pull-right">:</div>
					</div>
							
					<div class="span9" style="margin-left: 10px;">
						{{ref}}
					</div>
				</li>
               {{/if}}
               
               {{#if ip}}
				<li class="row-fluid">	
					<div class="span2"><b>IP Address</b>
						<div class="pull-right">:</div>
					</div>		
					<div class="span9" style="margin-left: 10px;">
						{{ip}}
					</div>
				</li>
               {{/if}}

              {{#if user_agent}}
				<li class="row-fluid">	
					<div class="span2"><b>Browser & OS</b>
						<div class="pull-right">:</div>
					</div>		
					{{#stringToJSON this "parsedUserAgent"}}{{/stringToJSON}}
                    <div class="span9" style="margin-left: 10px;">
						{{parsedUserAgent.browser_name}}, {{titleFromEnums parsedUserAgent.os}}
					</div>
				</li>
               {{/if}}

                {{#if user_agent}}
				<li class="row-fluid">	
					<div class="span2"><b>Device Type</b>
						<div class="pull-right">:</div>
					</div>		
					{{#stringToJSON this "parsedUserAgent"}}{{/stringToJSON}}
                    <div class="span9" style="margin-left: 10px;">
						{{ucfirst parsedUserAgent.device_type}}
					</div>
				</li>
               {{/if}}

				{{#if city}}
                <li class="row-fluid">	
					<div class="span2"><b>Location</b>
						<div class="pull-right">:</div>
					</div>		
					<div class="span9" style="margin-left: 10px;">
						{{ucfirst city}}, {{ucfirst region}}, {{getCountryName country}}
					</div>
				</li>
               {{/if}}
		</ul>
</div>
	<div class="clear">
		<small class="edit-hover" style="margin-right:10px">
			<time class="stats-created-time" datetime="{{epochToHumanDate "" created_time}}" style="border-bottom:dotted 1px #999">{{epochToHumanDate "ddd mmm dd yyyy HH:MM:ss" created_time}}</time>
		</small>	
        <a href="#" id="more-page-urls" style="float: right;">More</a>
	</div>
</div>
</div>
</script>