<script id="stripe-profile-template" type="text/html">
<div class="widget_content">
	{{#if customer.activeCard.name}}
		<h4 style="text-transform: capitalize;"><b>{{customer.activeCard.name}}</b></h4>
	{{/if}}
	{{#if customer.activeCard.addressState}}
		<p style="font-size: 13px;margin-bottom:0px;">
			{{customer.activeCard.addressState}}
			{{#if customer.activeCard.addressCountry}} 
				, {{customer.activeCard.addressCountry}}
			{{/if}}
		</p>
	{{/if}}
</div>
<div class="sub_header">
	<h4>Subscription Details</h4>
</div>
<ul style="margin:0px;padding:10px;border-bottom:1px solid #ddd;">
	{{#if customer.subscription}}
		<li class="row-fluid">	
			<div class="span5">Start Date
				<div class="pull-right">:</div>
			</div>
			<div class="span6" style="margin-left: 10px;">
				<time class="time-ago" datetime="{{epochToHumanDate "" customer.subscription.start}}">{{epochToHumanDate "" customer.subscription.start}}</time>
			</div>
		</li>
		{{#if customer.subscription.currentPeriodEnd}}
		<li class="row-fluid">	
			<div class="span5">End Date
				<div class="pull-right">:</div>
			</div>
			<div class="span6" style="margin-left: 10px;">
				<time class="time-ago" datetime="{{epochToHumanDate "" customer.subscription.currentPeriodEnd}}">{{epochToHumanDate "" customer.subscription.currentPeriodEnd}}</time>
			</div>
		</li>
		{{/if}}
		<li class="row-fluid">	
			<div class="span5">Current Plan
				<div class="pull-right">:</div>
			</div>
							
			<div class="span6" style="margin-left: 10px;">
				{{customer.subscription.plan.id}}
			</div>
		</li>
		<li class="row-fluid">	
			<div class="span5">Interval
				<div class="pull-right">:</div>
			</div>
							
			<div class="span6" style="margin-left: 10px;">
				{{customer.subscription.plan.interval}}
			</div>
		</li>
		<li class="row-fluid">	
			<div class="span5">Amount
				<div class="pull-right">:</div>
			</div>
							
			<div class="span6" style="margin-left: 10px;">
				{{numeric_operation customer.subscription.plan.amount 100 "/"}} {{toUpperCase customer.subscription.plan.currency}}
			</div>
		</li>
	{{else}}
		<li style='color: #999;'>
	    	No active subscription
		</li>
	{{/if}}
</ul>

<div class="sub_header">
		<h4>Invoices</h4>
</div>
<ul style="margin:0px;">
{{#if invoice.length}}
	{{#each invoice}}
		<li class="row-fluid sub_header_li">
					<a class="pull-left" data-toggle="collapse" href="#collapse-{{id}}" >{{#if_equals paid true}}Paid{{else}}Pending{{/if_equals}}</a>
					<div class="pull-right">$ {{numeric_operation total 100 "/"}}</div><br>
					<div id="collapse-{{id}}" class="collapse" style="color: rgba(0, 0, 0, 0.5);">
							{{#each lines.data}}	
								{{#if_equals type "invoiceitem"}}
									<div class="pull-left">{{description}}</div>					
									<div class="pull-right">$ {{numeric_operation amount 100 "/"}}</div><br>
								{{/if_equals}}
								{{#if_equals type "subscription"}}
									<div class="pull-left">{{plan.name}}</div>					
									<div class="pull-right">$ {{numeric_operation plan.amount 100 "/"}}</div><br>
									<div class="pull-left">Quantity</div>					
									<div class="pull-right">{{quantity}}</div><br>
									<div style="text-overflow:ellipsis;white-space:nowrap;overflow:hidden;width:100%"><small>
											{{epochToHumanDate "dd-mmm-yy" period.start}}&nbspto 
											{{epochToHumanDate "dd-mmm-yy" period.end}}
									</small></div>
								{{/if_equals}}	         
							{{/each}}
					</div>
					<small><time class="time-ago pull-left" datetime="{{epochToHumanDate "" date}}">{{epochToHumanDate "" date}}</time></small>
		</li>
	{{/each}}
{{else}}
	<li style='color: #999;'>
	    No payments
	</li>
{{/if}}
</ul>
</script>