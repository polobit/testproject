<script id="trigger-add-template" type="text/html">
<div class="row">
    <div class="span12">
        <div class="span8">
            <div class="well">
                <form id="addTriggerForm" name="addTriggerForm" class="form-horizontal">
                    {{#if id}}
                        <legend>Edit Trigger</legend>
                        <input name="id" type="hidden" value="{{id}}" />
                    {{else}}
                        <legend><i class="icon-plus-sign"></i> Add Trigger</legend>
                    {{/if}} 
                    <fieldset>
                        <div class="control-group">
                            <label class="control-label" style="width:200px!important;">Name <span class="field_req">*</span></label>
                            <div class="controls" style="margin-left:220px!important;">
                                <input type="text" id="name" class="required" name="name" />
                            </div>
                        </div>
                        <div class="control-group">
                            <label class="control-label" style="width:200px!important;">When this happens <span class="field_req">*</span></label>
                            <div id="LHS" name="LHS">
                                  <div class="controls" style="margin-left:220px!important;">
                                    <select id="trigger-type" name="type" class="required">		
 										<option></option>
                                        <optgroup label="Tag">
										<option value="TAG_IS_ADDED">Tag is added</option>
                                        <option value="TAG_IS_DELETED">Tag is deleted</option>
										<optgroup label="Contact">
                                        <option value="CONTACT_IS_ADDED">Contact is added</option>
                                        <option value="ADD_SCORE" id="add-score">Contact Score (>=)</option>
                                        <optgroup label="Deal">
                                        <option value="DEAL_IS_ADDED">Deal is added</option>
                                        <option value="DEAL_IS_DELETED">Deal is deleted</option>
                                        <option value="DEAL_MILESTONE_IS_CHANGED">Deal milestone is changed</option>
										<optgroup label="Timer">
										<option value="RUNS_DAILY">Daily</option>
                                        <option value="RUNS_WEEKLY">Weekly</option>
                                        <option value="RUNS_MONTHLY">Monthly</option>
										<optgroup label="Payments">
										<option value="STRIPE_CHARGE_EVENT" id="stripe-charge-event">Stripe Event</option>
                                        <!--<option value="SHOPIFY_EVENT" id="shopify-event">Shopify Event</option>-->
										<optgroup label="Email Bounces">
										<option value="SOFT_BOUNCE">Soft Bounce</option>
										<option value="HARD_BOUNCE">Hard Bounce</option>
										<optgroup label="Email Event">
										<option value="INBOUND_MAIL_EVENT" id="inbound-mail-event">New Email</option>
										<option value="EMAIL_OPENED">Email Opened</option>
										<option value="EMAIL_LINK_CLICKED">Email Link Clicked</option>
									</select>
                                </div>
                            </div>
                        </div>
						
						<div class="control-group" style="display:none;">
							<div class="controls" style="margin-left:220px!important;">
                            <select id="contact-filter" name="contact_filter_id" class="required">
                                    <option value="">Select...</option>
                                </select>
							</div>
                        </div>
							
                        <div class="control-group" style="display:none;">
                            <div id="RHS" name="RHS">
                                <label class="control-label TAG_IS_ADDED TAG_IS_DELETED ADD_SCORE EMAIL_OPENED" style="width:200px!important;"></label>
                                <div class="controls" style="margin-left:220px!important;width:230px!important;">
                                    <input type="text" value="{{custom_tags}}" id="trigger-custom-tags" name="custom_tags" class="required trigger-tags TAG_IS_ADDED TAG_IS_DELETED" style="margin-bottom: -1px;" placeholder="Enter tag" />
                                    <input type="text" placeholder="Enter Score" {{#if custom_score}} value="{{this.custom_score}}" {{/if}} id="trigger-custom-score" name="custom_score" class="ADD_SCORE required custom-value digits" />
                                </div>
                            </div>
                        </div>
                        <div class="control-group" style="display:none;">
							<div class="controls" style="margin-left:220px!important;">
                            <select id="trigger-deal-milestone" name="trigger_deal_milestone" class="required">
                                    <option value="">Select...</option>
                                </select>
							</div>
                        </div>
						<div class="control-group" style="display:none;">
							<div class="controls" style="margin-left:220px!important">
							<select id="trigger-stripe-event" name="trigger_stripe_event" class="required">
									<option value="">Select Stripe Event</option>
									<option value="CHARGE_SUCCEEDED" id="charge-succeeded">Charge succeeded</option>
									<option value="CHARGE_FAILED" id="charge-failed">Charge failed</option>
									<option value="CHARGE_REFUNDED" id="charge-refunded">Charge refunded</option>
									<option value="CHARGE_CAPTURED" id="charge-captured">Charge captured</option>
									<option value="CHARGE_UPDATED" id="charge-updated">Charge updated</option>
									<option value="CUSTOMER_DELETED" id="customer-deleted">Customer deleted</option>
							</select>
							<div style="margin-top:2px;">
							<small>You need to <a href="https://stripe.com/docs/webhooks#configuring-your-webhook-settings" target="_blank">setup webhooks</a> in your stripe account for this</small>
							</div>
							</div>
						</div>
                        <!--Email Clicked and Opened-->
						<div class="control-group" style="display:none;">
							<div class="controls" style="margin-left:220px!important">
									<select id="email-tracking-type" name="email_tracking_type">
										<option value=""></option>
										<option value="ANY">Any</option>
										<option value="CAMPAIGNS">Campaigns</option>
										<option value="PERSONAL">Personal</option>
									</select>
							</div>
						</div>
						<div class="control-group" style="display:none;">
                            <label class="control-label" style="width:200px!important;"></label>
                            <div class="controls" style="margin-left:220px!important;">
                                <select id="email-tracking-campaign-id" name="email_tracking_campaign_id" class="required">
                                    <option value="">Select...</option>
                                </select>
                            </div>
                        </div>
						 <div class="control-group" style="display:none;">
                            <div>
                                <label class="control-label" style="width:200px!important;"></label>
                                <div class="controls" style="margin-left:220px!important;width:230px!important;">
                                    <input type="text" id="custom-link-clicked" value="{{custom_link_clicked}}" name="custom_link_clicked" class="required EMAIL_LINK_CLICKED" style="margin-bottom: -1px;" placeholder="URL contains" />
                                </div>
                            </div>
                        </div>
						<div class="control-group" style="display:none;">
							<div class="controls" style="margin-left:220px!important">
							<select id="trigger-shopify-event" name="trigger_shopify_event" class="required">
									<option value="">Select Shopify Event</option>
									<option value="CUSTOMERS_CREATE">Customer created</option>
									<option value="CUSTOMERS_UPDATE">Customer updated</option>
									<option value="ORDERS_CREATE">Order created</option>
									<option value="ORDERS_UPDATE">Order updated</option>
									<option value="ORDERS_PAYMENT">Order payment</option>
									<option value="ORDERS_DELETE">Order deleted</option>
									<option value="ORDERS_FULFILLED">Order fulfilled</option>
									<option value="ORDERS_CANCELLED">Order cancelled</option>
									<option value="CHECKOUTS_CREATE">Checkout created</option>
									<option value="CHECKOUTS_UPDATE">Checkout updated</option>
									<option value="CHECKOUTS_DELETE">Checkout deleted</option>
							</select>
							</div>	
						</div>
						<div id="trigger-inbound-mail-event" style="display:none;">
						<div class="control-group">
							<div class="controls" style="margin-left:220px!important; margin-top:-12px;">
								<small><i class="icon-info-sign"></i> For Agile CRM to recognize your emails, please setup <a class="inbound-help-text">{{inboundMail}}</a> as forwarding email at your email server. The email's From address will be added as a contact and campaign will be run on it (only for the very first time).</small>								
							</div>
                		</div>
						</div>
                        <div class="control-group">
                            <label class="control-label" style="width:200px!important;">Run this Campaign on the Contact <span class="field_req">*</span></label>
                            <div class="controls" style="margin-left:220px!important;">
                                <select id="campaign-select" name="campaign_id" class="required">
                                    <option value="">Select...</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-actions">          
                            <a href="#triggers" id="trigger-save" class="save btn btn-primary">Save</a>
                            <a href="#" id="trigger-cancel" class="btn">Cancel</a> 
                        </div>
                    </fieldset>
                </form>
            </div>
        </div>
        <div class="span3">
            <div class="well">
                <h3>
                    Triggers
                </h3>
                <br />   
                <p> Give your trigger a name and choose a condition to be satisfied. Immediately link your trigger to the appropriate campaign, for an action to follow.</p>
            </div>
        </div>
    </div>
</div>
</script>