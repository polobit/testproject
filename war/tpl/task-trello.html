<script id="new-tasks-lists-collection-template" type="text/html"> 
 <div id="new-tasks-lists-model-list" class="list-area row-fluid">

 </div>
</script>

<script id="new-tasks-lists-model-template" type="text/html">
     <div class="list-header" attr="{{heading}}" ownerID={{owner_id}}> 
         {{get_normal_name heading}}                 
     </div> 
     <div id="list-tasks" class="list-tasks">

     </div>   
     <div class="list-bottom left add-task"><a href="#"><i class="icon-plus" /> Add a task...</a></div>     
</script>

<script id="task-collection-template" type="text/html">
<div id="task-model-list" class="task-model-list">
   
</div>
</script>

<script id="task-model-template" type="text/html">
{{#if_equals priority_type "HIGH"}}
 <div class="listed-task red ui-state-default" id="{{id}}">
{{else}}
  {{#if_equals priority_type "LOW"}}
    <div class="listed-task yellow ui-state-default" id="{{id}}">
  {{else}}
    <div class="listed-task ui-state-default" id="{{id}}">
  {{/if_equals}}
{{/if_equals}}

  <div class="task-body">    
    <div class="task-left">  
      {{#is_link subject}}<span class="task-subject activate-link">{{else}}<span class="task-subject">{{/is_link}}{{safe_string subject}}</span>

      {{#if contacts}}  
         <div class="task-related-to" title="Related To">
        	{{#each contacts}}
        		{{#if_contact_type "PERSON"}}
        			<a href="#contact/{{id}}" class="activate-link">{{getPropertyValue properties "first_name"}} {{getPropertyValue properties "last_name"}}</a>
        		{{/if_contact_type}}
				{{#if_contact_type "COMPANY"}}
        			<a href="#contact/{{id}}" class="activate-link">{{getPropertyValue properties "name"}}</a>
        		{{/if_contact_type}}
        	{{/each}}
		 </div>
      {{/if}}
    </div>

    <div class="task-right">
      <label class="task-type label" title="Category">{{get_normal_name type}}</label>
      <div class="task-owner">     
         {{#if ownerPic}}
        	<img src="{{ownerPic}}" width="32" height="32" title="{{taskOwner.name}}"/>
	     {{else}}
			<img src="{{defaultGravatarurl 50}}" width="32" height="32" title="{{taskOwner.name}}"/>
	     {{/if}}
      </div> 
    </div>
   </div> <!--task-body-->  
   <div class="task-footer">
      <time class="task-due-time time-ago" data="{{id}}" value="{{due}}" datetime="{{epochToHumanDate "" due}}">{{epochToHumanDate "ddd mmm dd yyyy" due}}</time>
      <div class="task-actions">           
           <i class="task-action icon icon-edit edit-task" data="{{id}}" title="Edit Task"></i>
           <i class="task-action icon icon-check is-task-complete" data="{{id}}" title="Is Task Complete?"></i>
           <i class="task-action icon icon-trash delete-task" data="{{id}}" title="Delete Task"></i>
      </div>
   </div> <!--task-footer-->
</div>
</script>


<script id="viewTask-template" type="text/html">
<div class="modal hide fade" id="viewTaskModal">
	<div class="modal-header">
		<button class="close" data-dismiss="modal">x</button>
		<h3>Task</h3>
	</div>
	<div class="modal-body">
      <div style="display:flex;">
        <div style="width: 64%;">
		   {{#is_link subject}}
               <span class="activate-link" style="font-size:large;" title="Name of Task">
           {{else}}
               <span style="font-size:large;" title="Name of Task">
           {{/is_link}}
                {{safe_string subject}}
              </span>

		   {{#if contacts}}  
              <div title="Related To">
        	    {{#each contacts}}
        		   {{#if_contact_type "PERSON"}}
        			  <a href="#contact/{{id}}" class="activate-link">{{getPropertyValue properties "first_name"}} {{getPropertyValue properties "last_name"}}</a>
        		   {{/if_contact_type}}
				   {{#if_contact_type "COMPANY"}}
        			  <a href="#contact/{{id}}" class="activate-link">{{getPropertyValue properties "name"}}</a>
        		   {{/if_contact_type}}
        	    {{/each}}
		      </div>
           {{/if}}
       </div>  
 
       <div style="width: 34%;display:flex;">
         <div style="width: 55%;" title="Priority"> 
           {{#if_equals priority_type "HIGH"}}<label style="color:red;"><b>!!!</b></label>{{/if_equals}}       
           {{#if_equals priority_type "LOW"}}<label style="color:#dbdb57;"><b>!!</b></label>{{/if_equals}}
           {{#if_equals priority_type "NORMAL"}}<label style="color:blue;"><b>!</b></label>{{/if_equals}}
           
           <label class="label" style="display: -webkit-inline-box;" title="Category">{{type}}</label>
         </div>
         <div style="width: 33.33%;">
         <label class="txt-mute">Owner</label>
         <label title="Owner"><b>{{taskOwner.name}}</b></label>
         </div>
         <div style="width: 33.33%;">
         {{#if ownerPic}}
        	<img class="thumbnail" src="{{ownerPic}}" width="40px" height="40px" title="{{taskOwner.name}}"/>
	     {{else}}
			<img class="thumbnail" src="{{defaultGravatarurl 50}}" width="40px" height="40px" title="{{taskOwner.name}}"/>
	     {{/if}}
         </div>
        </div>
     </div><!-- row end -->						

     <div class="row-fluid" style="padding-top: 15px;">
        <i class="icon-time icon-2x pull-left"></i>
        <div class="span4" title="Due Date">
          <b><time data="{{id}}" value="{{due}}" datetime="{{epochToHumanDate "" due}}">{{epochToHumanDate "ddd mmm dd yyyy" due}}</time></b>
          <br>
          <p class="txt-mute">(<time class="time-ago" data="{{id}}" value="{{due}}" datetime="{{epochToHumanDate "" due}}">{{epochToHumanDate "ddd mmm dd yyyy" due}}</time>)</p>
        </div>
        <div class="span4">
		  <label title="Status (Progress%)"> <b>
             {{#if_equals status "NOT_STARTED"}}Not Started{{/if_equals}}
             {{#if_equals status "IN_PROGRESS"}}In Progress{{/if_equals}}
             {{#if_equals status "COMPLETED"}}Completed{{/if_equals}}
             {{#if_equals status "PAUSED"}}Paused{{/if_equals}}               
             ({{progress}}%)</b> 
          </label>
        </div>
     </div>
     
     {{#if descrption}}
     <div style="width:80%;padding-top: 15px;" title="Description">	
        <label> <b>Details</b> </label>         
		<label class="txt-mute">{{descrption}}</label>
     </div> 
     {{/if}}
	</div>	
</div>
</script>



<div class="modal hide fade" id="editTaskModal">
	<div class="modal-header">
		<button class="close" data-dismiss="modal">x</button>
		<h3>Task Edit</h3>
	</div>
	<div class="modal-body">
		<div id="relatedtask">
			<!--Task form -->
			<form id="editTaskForm" name="editTaskForm" method="post">
				<fieldset>
					<input name="id" type="hidden" value="{{id}}" /> <input
						name="taskListId" type="hidden" value="{{taskListId}}" /> <input
						name="taskListOwnerId" type="hidden" value="{{taskListOwnerId}}" />

					<div class="row">
						<div id="updateTask" class="span3 control-group">
							<div class="controls">
								<span class="input "><input id="subject" type="text"
									name="subject" size="40" class="required"
									style="font-size: large;" /> </span>
							</div>
						</div>
						<div id="task-category" class="span2 control-group"
							style="width: 96px;">
							<div class="controls">
								<span class="input"> <select name="type" id="type"
									size="1" class="required label" style="width: 95px;">
										<option></option>
										<option value="CALL">Call</option>
										<option value="EMAIL">Email</option>
										<option value="FOLLOW_UP">Follow-up</option>
										<option value="MEETING">Meeting</option>
										<option value="MILESTONE">Milestone</option>
										<option value="SEND">Send</option>
										<option value="TWEET">Tweet</option>
										<option value="OTHER">Other</option>
								</select>
								</span>
							</div>
						</div>

						<div class="span2 control-group">
							<label class="control-label txt-mute">Owner</label>
							<div class="controls" id="owners">
								<select id="owners-list" class="required" name="owner_id"
									style="width: 80px;"></select> <img class="loading-img"
									src="img/21-0.gif"></img>
							</div>
							<div id="owner-pic"></div>
						</div>

					</div>
					<div class="row">
						<div class="span3 control-group">
							<div class="controls" style="display: inline-flex;">
								<label for="due" class="control-label"><b>Due </b> </label> <span
									class="display-due" style="margin-left: 10px;"> <i
									class="icon-time icon-2x"
									style="border: 1px solid; padding: 4px 4px 4px 4px; display: block;"></i>
								</span> <b><input type="text" name="due" placeholder="mm/dd/yyyy"
									id="update-task-date-1" class="required date" /></b>
							</div>
						</div>
						<div class="span2">
							<label for="priority_type" class="control-label"><b>Priority
							</b></label> <span class="input "> <select name="priority_type"
								id="priority_type" size="1" class="input-medium">
									<option value="HIGH">High</option>
									<option value="NORMAL" selected="selected">Normal</option>
									<option value="LOW">Low</option>
							</select>
							</span>
						</div>
					</div>
					<div class="row">
						<div class="control-group span6">
							<div class="controls">
								<div>
									<div class="pull-left">
										<ul name="contacts" class="contacts tags tagsinput"></ul>
									</div>
									<input type="text" id="update_task_related_to"
										class="typeahead typeahead_contacts" data-provide="typeahead"
										data-mode="multiple" size="40"
										placeholder="Add related to contact" />
								</div>
							</div>
						</div>
					</div>
					<div class="row">
						<div class="span2 control-group">
							<div class="controls">
								<label class="checkbox"><b>Is Complete </b><input
									type="checkbox" name="is_complete"> </label>
							</div>
						</div>
					</div>

					<div class="row">
						<div class="span3">
							<label for="status" class="control-label"><b>Status </b></label>
							<span class="input "> <select name="status" id="status"
								size="1" class="input-medium">
									<option value="NOT_STARTED" selected="selected">Not
										Started</option>
									<option value="IN_PROGRESS">In Progress</option>
									<option value="COMPLETED">Completed</option>
									<option value="PAUSED">Paused</option>
							</select>
							</span>
						</div>
						<div class="span2">
							<label for="progress" class="control-label"><b>Progress
									(%) </b></label> <input name="progress" id="progress" type="number" min="1"
								max="100" value="">
						</div>
					</div>
					<div class="row">
						<div class="control-group span6">
							<div class="controls">
								<label for="descrption" class="control-label"><b>Details</b></label>
								<textarea type="text" id="descrption" name="descrption"
									size="40" placeholder="Description of Task"
									data-mode="multiple" style="width: 100%;"></textarea>
							</div>
						</div>
					</div>



				</fieldset>
			</form>
		</div>
	</div>
	<div class="modal-footer">
		<a href="#" class="btn btn-primary" id="edit_task_validate">Update</a>&nbsp;
		<span class="save-status"></span>
	</div>
</div>
