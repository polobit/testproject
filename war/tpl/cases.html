<script id="cases-collection-template" type="text/html">
<div class="row">
    <div class="span12">
        <div class="page-header">
            <h1>Cases</h1>
            <a href="#cases-add" class="cases-add btn right" style="top:-30px;position:relative"><i class="icon-plus-sign" /> Add Case</a>
        </div>
    </div>
</div>
<div class="row">
    <div class="span9">
		{{#unless this.length}}
		<div class="slate">
            <div class="slate-content">
                <div class="box-left">
                    <img alt="Clipboard" src="/img/clipboard.png" />
                </div>
                <div class="box-right">
                    <h3>No Cases listed </h3>
                    <div class="text">
						You can add case by clicking the button below or the one on the right side of the page.
                    </div>
                    <a href="#" class="cases-add btn blue"><i class="icon-plus-sign"></i>  Add Case !</a>
                </div>
            </div>
        </div>
		{{/unless}}
        {{#if this.length}}
        <div class="data-block">
            <div class="data-container">
                <table class="table table-striped showCheckboxes" url="core/api/cases/bulk" id="sort-table">
                    <thead>
                        <tr>
                            <th>Title</th>
                            <th>Owner</th>
                            <th>Status</th>
                            <th>Contacts</th>
                        </tr>
                    </thead>
                    <tbody id="cases-model-list" style="cursor:pointer;"><!--route="cases/"-->
                    </tbody>
                </table>
            </div>
        </div>
        {{/if}}
    </div>
    <div class="span3">
        <div class="data-block">
            <div class="well">
                <header>
                    <h3><span><i class="icon-suitcase"></i></span>Cases</h3>
                </header>
                <h3>
                    What are Cases?
                </h3>
                <br />
                <p>
                    You can use cases to track and resolve customer issues. You can create a case when customers/prospects ask questions, report bugs or complain about your service. You can relate a case to contacts, assign an owner to it, and keep track of it
                </p>
            </div>
        </div>
    </div>
</div>
</script>

<script id="cases-model-template" type="text/html">
<td data="{{id}}" class="data">
		{{title}}
	</b>
</td>

<td>
    <div style="height:auto;text-overflow:ellipsis;white-space:nowrap;width:5em;overflow:hidden;">
	   {{#if pic}}
        <img class="thumbnail" src="{{pic}}" width="40px" height="40px" title="{{owner.name}}" />
	   {{else}}
		<img class="thumbnail" src="{{defaultGravatarurl 50}}" width="40px" height="40px" title="{{owner.name}}" />
       {{/if}}
    </div>
</td>
<td>
	<div style="">
		{{status}}
	</div>
</td>
<td>
	<div style="height:auto;text-overflow:ellipsis;white-space:nowrap;width:157px;overflow:hidden;display:inline-block;">
        	{{#each contacts}}
			<div style="display:inline-block;">
          	 	<img class='thumbnail' src="{{gravatarurl properties 50}}" width="40px" height="40px" title="{{getPropertyValue properties "first_name"}} {{getPropertyValue properties "last_name"}}" />
			</div>
			{{/each}}
	</div>
       {{#if_greater this.contacts.length "3"}}<span>...</span>{{/if_greater}}
</td>
</script>



<!-- New (Case) Modal views -->
<div class="modal hide fade cases-modal" id="casesModal">
	<div class="modal-header">
		<button class="close" data-dismiss="modal">x</button>
		<h3>
			<i class="icon-plus-sign"></i> Add Case
		</h3>
	</div>
	<div class="modal-body agile-modal-body">
		<form id="casesForm" name="casesForm" method="post">
			<fieldset>
				<div class="row-fluid">
					<div class="control-group span5">
						<label class="control-label"><b>Title </b><span
							class="field_req">*</span></label>
						<div class="controls" style="margin-right:10px;">
							<span><input id="title" name="title" type="text" width='100%' 
								class=" required" placeholder="Title of the Case" /></span>
						</div>
					</div>
					
				</div>
				<div class="row-fluid">
					<div class="control-group span5">
						<label class="control-label"><b>Owner </b><span
							class="field_req">*</span></label>
						<div class="controls" id="owners">
							<select id="owners-list" class="required" name="owner_id"></select>
						</div>
					</div>
					<div class="control-group span5" style="margin-left: 30px;">
						<label class="control-label"><b>Status </b><span class="field_req">*</span></label>
						<div class="controls" id='status'>
							<span>
								<select id="status-list" class="required" name="status">
									<option value='OPEN'>Open</option>
									<option value='CLOSE'>Closed</option>
								</select>
							</span>
						</div>
					</div>
				</div>

				<div class="control-group">
					<label class="control-label"><b>Related Contacts </b></label>
					<div class="controls" id="contactTypeAhead">
						<div>
							<div class="pull-left">
								<ul name="related_contacts_id" class="contacts tagsinput tags"></ul>
							</div>
							<input type="text" id="contacts-typeahead-input"
								placeholder="Contact Name" class="typeahead typeahead_contacts"
								data-provide="typeahead" data-mode="multiple" />
						</div>
					</div>
				</div>
				
				<div class="control-group">
					<label class="control-label"><b>Description </b></label>
					<div class="controls" style="margin-right:10px;">
						<textarea id="description" name="description" rows="3" style="width:100%"
							class="input" placeholder="Add Comment.."></textarea>
					</div>
				</div>
			</fieldset>
		</form>
	</div>
	<div class="modal-footer">
		<a href="#" class="btn btn-primary" id="cases_validate">Save
			Changes</a> <span class="save-status"></span>
	</div>
</div>
<!-- End of Modal views -->

<!-- Edit cases modal -->
<div class="modal hide fade cases-modal" id="casesUpdateModal">
	<div class="modal-header">
		<button class="close" data-dismiss="modal">x</button>
		<h3>Edit Case</h3>
	</div>
	<div class="modal-body agile-modal-body">
		<form id="casesUpdateForm" name="casesUpdateForm" method="post">
			<fieldset>
				<input name="id" type="hidden"/>
				<div class="row-fluid">
					<div class="control-group span5">
						<label class="control-label"><b>Title </b><span
							class="field_req">*</span></label>
						<div class="controls">
							<span><input id="title" name="title" type="text"
								class=" required" placeholder="Title of the Case" /></span>
						</div>
					</div>
					
				</div>
				<div class="row-fluid">
					<div class="control-group span5">
						<label class="control-label"><b>Owner </b><span
							class="field_req">*</span></label>
						<div class="controls" id="owners">
							<select id="owners-list" class="required" name="owner_id"></select>
						</div>
					</div>
					
					<div class="control-group span5"  style="margin-left: 30px;">
						<label class="control-label"><b>Status </b><span class="field_req">*</span></label>
						<div class="controls" id='status'>
							<span>
								<select id="status-list" class="required" name="status">
									<option value='OPEN'>Open</option>
									<option value='CLOSE'>Closed</option>
								</select>
							</span>
						</div>
					</div>
				</div>
								
				<div class="control-group">
					<label class="control-label"><b>Related Contacts </b></label>
					<div class="controls" id="contactTypeAhead">
						<div>
							<div class="pull-left">
								<ul name="related_contacts_id" class="contacts tagsinput tags"></ul>
							</div>
							<input type="text" id="contacts-typeahead-input"
								placeholder="Contact Name" class="typeahead typeahead_contacts"
								data-provide="typeahead" data-mode="multiple" />
						</div>
					</div>
				</div>
				
				<div class="control-group">
					<label class="control-label"><b>Description </b></label>
					<div class="controls" style="margin-right:10px;">
						<textarea id="description" name="description" rows="3" style='width:100%;'
							class="input" placeholder="Add Comment.."></textarea>
					</div>
				</div>
			</fieldset>
		</form>
	</div>
	<div class="modal-footer">
		<a href="#" class="btn btn-primary" id="cases_validate">Save
			Changes</a> <span class="save-status"></span>
	</div>
</div>
<!-- end cases edit modal -->

<!-- popover -->
<script id="cases-detail-popover-template" type="text/html">
<div class="row-fluid">
    <div class="span9" style="margin-left:0px;">
        <div>
            <div style="line-height:20px;font-style:italic;margin-bottom:5px;">
                {{description}}
            </div>
            <div style="margin:5px;">
                <p><b>Owner</b> : {{owner.name}}</p>
                <p><b>Related To</b> : </p> 
                <div>
				{{#each contacts}}
                	<div class="span4" style="display:inline-block;margin:5px;margin-left:25px;">
                    	<img class="thumbnail" src="{{gravatarurl properties 50}}" width="40px" height="40px" />
                    	<div style="display:inline-block;text-overflow:ellipsis;white-space:nowrap;width:90px;overflow:hidden;">
                        	{{getPropertyValue properties "first_name"}} {{getPropertyValue properties "last_name"}},
                    	</div>
                	</div>
                {{/each}}
                </div>
            </div>
        </div>
    </div>
</div>
</script>
<!--end popover-->