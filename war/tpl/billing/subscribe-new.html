<script id="subscribe-template" type="text/html">
<div class="row">
	<div class="span12">
		<div class="page-header">
			<h1>Plan and Upgrade
				<a href="#" id="cancel-account-request" class="pull-right btn btn-danger" align="center" style="margin-top:10px;">Cancel My Account</a>
			</h1>
		</div>
	</div>
</div>
<div class="row">
	<div class="span11">
		<div class="span4" id="plan-details-pane"></div>
		<div class="span4" id="email-details-pane"></div>
	</div>
</div>
<div class="clear-fix"></div>
<div class="row-fluid" style="margin-top:50px">
	<div style="border-bottom:1px solid #f5f5f5;margin-bottom:20px">
		<h3>Your Credit Card Details</h3>
	</div>

	<div class="clear-fix"></div>
{{#stringToJSON this "billingData"}}{{/stringToJSON}}
{{#if billingData}}
	<div class="card-details">
		Name : {{billingData.cards.data.0.name}} </br> Credit card : ends with {{billingData.cards.data.0.last4}} (Expiry : {{billingData.cards.data.0.expMonth}} / {{billingData.cards.data.0.expYear}}) <a
			href="#update-card">Change card</a>
	</div>
	{{else}}
		No Credit Cards attached. <a href="#attach-card">Attach card</a>
{{/if}}
</div>
</script>

<script id="account-plan-details-template" type="text/html">

		<div class="well" style="width: 220px; height: 200px;">
			<div style="width: 220px; height: 180px;">
				<div style="border-bottom: 1px solid #e5e5e5">
					<h3>Your current plan</h3>
				</div>
				<div class="clearfix"></div>
					<div class="form-horizontal" style="margin-left:-33%;margin-top:10px">
						{{#getSubscriptionBasedOnPlan billingData plan}}
							<div class="control-group">
                       		 <label class="control-label">Current Plan</label>
                        		<div class="controls" style="margin-top: 5px;">
                          			 {{getAccountPlanName ../plan.plan_type}}, {{getAccountPlanInteval ../plan.plan_type}}
                        		</div>
                    		</div>
							<div class="control-group" style="margin-top:-5%">
                       			 <label class="control-label" style="margin-top:-2%">Users</label>
                        			<div class="controls">
										{{quantity}}
                        			</div>
                    		</div>
							<div class="control-group" style="margin-top:-5%">
                       			 <label class="control-label" style="margin-top:-2%">Amount</label>
                        			<div class="controls">
										${{total}}
                        			</div>
                    		</div>
							 <div class="control-group" style="margin-top:-5%">
                       			 <label class="control-label" style="margin-top:-2%">Start</label>
                        			<div class="controls">
										<time class="time-ago">{{epochToHumanDate "mmm dd, yyyy HH:MM tt" currentPeriodStart}}</time>
                        			</div>
                    		</div>
							<div class="control-group" style="margin-top:-5%">
                       			 <label class="control-label" style="margin-top:-2%">End</label>
                        			<div class="controls">
										<time class="time-ago">{{epochToHumanDate "mmm dd, yyyy HH:MM tt" currentPeriodEnd}}</time>
                        			</div>
                    		</div>
							{{else}}
									<div>Free Plan</div>
									<div>2 Users</div>
						{{/getSubscriptionBasedOnPlan}}
						
					</div>
		{{#if billingData}}
				<a class="btn btn-primary" href="#subscribe" id="account_plan_upgrade"> Upgrade </a>
			{{else}}
				<a class="btn btn-primary" href="#" id="attach_card_notification"> Upgrade </a>
		{{/if}}
			</div>
		</div>
</script>

<script id="email-plan-details-template" type="text/html">
	<div class="span4">
	<div class="well" style="width: 220px; height: 200px;">
		<div style="width: 220px; height: 180px;">
			<div style="border-bottom: 1px solid #e5e5e5;">
				<h3>Email plan</h3>
			</div>
			<div class="clearfix"></div>

			<form id="gateway" class="form-horizontal hide">
				<input type="text" name="gateway" class="hidden" value="Stripe" />
			</form>
				
				{{#getSubscriptionBasedOnPlan billingData emailPlan}}
						<div class="form-horizontal" name="emailPlan" style="margin-left:-33%;margin-top:10px" id="email-plan-form">
							<div class="control-group">
                       		 <label class="control-label">Emails</label>
                        		<div class="controls" style="margin-top: 5px;">
                          			 {{numeric_operation ../emailPlan.quantity 1000 "*"}}
                        		</div>
                    		</div>
							<div class="control-group" style="margin-top:-5%">
                       			 <label class="control-label" style="margin-top:-2%">Amount</label>
                        			<div class="controls">
										${{total}}
                        			</div>
                    		</div>
							 <div class="control-group" style="margin-top:-5%">
                       			 <label class="control-label" style="margin-top:-2%">Start</label>
                        			<div class="controls">
										<time class="time-ago">{{epochToHumanDate "mmm dd, yyyy HH:MM tt" currentPeriodStart}}</time>
                        			</div>
                    		</div>
							<div class="control-group" style="margin-top:-5%">
                       			 <label class="control-label" style="margin-top:-2%">End</label>
                        			<div class="controls">
										<time class="time-ago">{{epochToHumanDate "mmm dd, yyyy HH:MM tt" currentPeriodEnd}}</time>
                        			</div>
                    		</div>
							
					</div>
					{{else}}
							<form class="form-horizontal" name="emailPlan" style="margin-left:-40%;margin-top:10px" id="email-plan-form">
						<div class="control-group">
                       		 <label class="control-label">Send Rate</label>
                        		<div class="controls" style="margin-top: 5px;">
									<input type="text" class="input input-small required" id="email-quantity" name="quantity"></input> X 1000
                        		</div>
                    		</div>
							<div class="control-group">
								<div class="controls">
									<span style="color: #FA782D; font-size: 30px;">$<span id="emails_total_cost">0</span></span>
									<p class="help-block" style="margin-top: 0px">
										( charged @ <span style="color: #FA782D;" id="email_rate">$5</span> / 1000 emails)
									</p>
								</div>
							</div>
						</form>
				{{/getSubscriptionBasedOnPlan}}
		</div>
	<div class="clearfix"></div>
					<a class="btn btn-primary" href="#" id="account_email_plan_upgrade"> Modify </a>
</div>
	</div>
</div>
</script>

<script id="email-plan-form-template" type="text/html">
<div class="span4">
	<div class="well" style="width: 220px; height: 200px;">
		<div style="width: 220px; height: 180px;">
			<div style="border-bottom: 1px solid #e5e5e5;">
				<h3>Email plan</h3>
			</div>
			<div class="clearfix"></div>

			<form id="gateway" class="form-horizontal hide">
				<input type="text" name="gateway" class="hidden" value="Stripe" />
			</form>
				<form class="form-horizontal" name="emailPlan" style="margin-left:-40%;margin-top:10px" id="email-plan-form">
						<div class="control-group">
                       		 <label class="control-label">Send Rate</label>
                        		<div class="controls" style="margin-top: 5px;">
									<input type="text" class="input input-small required" id="email-quantity" name="quantity"></input> X 1000
                        		</div>
                    		</div>
							<div class="control-group">
								<div class="controls">
									<span style="color: #FA782D; font-size: 30px;">$<span id="emails_total_cost">0</span></span>
									<p class="help-block" style="margin-top: 0px">
										( charged @ <span style="color: #FA782D;" id="email_rate">$5</span> / 1000 emails)
									</p>
								</div>
							</div>
				</form>
		</div>
<div class="clearfix"></div>
					<a class="btn btn-primary save" href="#"> Purchase </a>

					<a class="btn" href="#" id="close"> close </a>
	</div>
</div>
</script>