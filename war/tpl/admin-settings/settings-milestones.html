<script id="admin-settings-milestones-collection-template" type="text/html">
<div class="row">
	<div class='span9'>
	<div class="well">
		<div>
			<h3>Deal Tracks
			<a href="#pipelineModal" role="button" data-toggle="modal" type="submit" class="add-pipeline btn" style="float:right;"><i class="icon icon-plus-sign"></i> Add Track</a></h3></div>
    	<div id="admin-settings-milestones-model-list"></div>
		<div class="form-actions">
    		<a href="#" class="save-pipelines btn btn-primary">Save</a>
    	</div>
		<!-- New (Pipeline) Modal views -->
	<div class="modal hide fade" id="pipelineModal">
    <div class="modal-header">
        <button class="close" data-dismiss="modal">x</button>
        <h3><i class="icon-plus-sign"></i>&nbsp;Add Track</h3>
    </div>
    <div class="modal-body" style="max-height:420px !important;">
        <form id="pipelineForm" name="pipelineForm" method="post">
            <fieldset>
                <p>
				<input type="hidden" name="id" id="pipeline_id"/>
                <div class="control-group">
                    <label class="control-label"><b>Track Name</b> <span class="field_req">*</span></label>
                    <div class="controls">
                        <input name="name" type="text" field="pipeline" class="required" id="pipline_name" placeholder="Track" />

                    </div>
                </div>
                <div class="control-group hide">
					<label class="control-label"><b>Milestones</b> <span class="field_req">*</span></label>
                    <div class="controls">
                        <input class="input-large" name="milestones" class="required" type="text" id="milestones" value="New,Prospect,Proposal,Won,Lost" />
                    </div>
                </div>
            </fieldset>
        </form>
    </div>
    <div class="modal-footer">
		<span class="save-status"></span>
        <a href="#" class="save btn btn-primary" id="pipeline_validate">Save
        </a>
    </div>
</div>
</div>
<!-- End of Modal views -->
    </div>
<!-- Help Text -->
<div class="span3">
	<div class="data-block">
		<div class="well">
			<h3>What are Tracks and Milestones?</h3>
			<br/>
			<p>Tracks are sales processes. Use tracks to correspond to particular products or services offered by your company, or set up tracks to be used in deals with customers, partners, resellers, etc. When you create a new deal, you choose which track to associate it with.</p>
			<br/>
			<p>Milestones define the status of deals in a particular track. You can create any number of custom milestones in a track. Common milestones include 'New', 'In Progress',  'Won' or  'Lost'. When you associate a deal with a track, that deal will typically need to go through all of the track's milestones to be completed or finalized.</p>
		</div>
	</div>
</div>
<!-- End Help Text -->
<div class="modal hide fade" id="pipeline-delete-modal">
	<div class="modal-header">
        <button class="close" data-dismiss="modal">x</button>
        <h3>Delete Track</h3>
    </div>
	<div class="modal-body">
        <div id="deals-export-csv-detail">
             <p>Are you sure you want to delete Track - <span id="track-name"></span> ? </p>
			<p>All existing deals in this track can be accessed from the Deals list view.</p>
        </div>
    </div>
    <div class="modal-footer">
    <span class="pipeline-delete-message" style="margin-right:5px"></span>
    <a href="#" id="pipeline-delete-confirm" class="btn btn-primary">Yes</a>
    <a  href="#" class="btn close" data-dismiss="modal" style="opacity:0.5;">No</a>
    </div>
</div>

<!-- milestone error message -->
<div class="modal hide fade" id="milestone-error-modal">
	<div class="modal-header">
        <button class="close" data-dismiss="modal">x</button>
        <h3>Add Milestone</h3>
    </div>
	<div class="modal-body">
        <p><i class="icon-exclamation-sign" style="font-size: 25px;vertical-align: middle;padding-right: 5px;"></i>Special characters are not allowed except space and underscore</p>
    </div>
    <div class="modal-footer">
    <a  href="#" class="btn close" data-dismiss="modal" style="opacity:0.5;">Ok</a>
    </div>
</div>
</div>
</script>

<script id="admin-settings-milestones-model-template" type="text/html">
    	<form id="milestonesForm_{{id}}" class="form-horizontal pipeline" method=post>
    		{{#if id}}
    			<input type="text" name="id" class="hide" value={{id}}>
    		{{/if}} 
			{{#if id}}
    			<input type="text" name="name" class="hide" value={{name}}>
    		{{/if}} 		
    		<legend style="margin-bottom:0px;font-size: 16px;">{{name}}
			{{#if_equals name "Default"}}
			{{else}}
			<a href="#pipeline-delete-modal" role="button" data-toggle="modal" class="pipeline-delete" id="{{id}}" data="{{name}}" style="margin-left:10px;float: right;font-size: 18px;cursor: pointer;text-decoration: none;"><i class="task-action icon icon-trash" data="{{id}}" title="Delete Track"></i></a>
			{{/if_equals}}
			<a href="#pipelineModal" role="button" data-toggle="modal" class="pipeline-edit" id="{{id}}" data="{{name}}" style="float: right;font-size: 18px;cursor: pointer;text-decoration: none;"><i class="task-action icon icon-edit" data="{{id}}" title="Edit Track"></i></a>
			</legend>
			<fieldset>
    		<div class="control-group">  	 
                    <div id="milestone-values-{{id}}" class="milestone-ul-list" style="max-width:180px;">
					{{#milestone_ul milestones}}{{/milestone_ul}}
                    </div>
					<div><a href="#" class="show_milestone_field anchor-link"><i class="icon-plus-sign"></i> Add Milestone</a></div>
					<div class="show_field" style="display:none;">
						<input id="add_new_milestone" class="add_new_milestone" style="width:170px;margin-right:10px;" type="text" placeholder="New Milestone">
						<a class="btn add_milestone" id="add_milestone" href="#">Add</a>
					</div>
    				<input name="milestones" type="text" class="required hide" value="{{milestones}}"/>
    		</div> 
    		<fieldset>
    	</form>
</script>
