<script id="calendar-template" type="text/html">
<div class="custom-animated custom-fadeInUp">
	<div class="wrapper-md lter bg-light b-b calender-header agile-page-header">
		<div class="row">
			<div class="col-md-12">
				<h3 class="pull-left font-thin h3" style="margin-bottom: 0px !important;">{{agile_lng_translate 'portlets' 'calendar'}} <small></small></h3>
				<a id="refrecal" class="text-md btn m-l-none bg-transparent refresh-tickets no-shadow p-t-xs p-l-xs" onclick="refreshcal()">
					<i class="fa fa-refresh" data-toggle="tooltip" data-placement="bottom" data-original-title="{{agile_lng_translate 'campaigns' 'refresh'}}" style="vertical-align: text-top;"></i>
				</a>     	
				<div class="pull-right" style="margin-bottom: 0px !important;">
					<!-- <div id="event-list-filters" class="btn-group inline-block m-r">
					<img class="loading_img p-r-xs thumb-xs"  src= "{{getS3ImagePath 'img/21-0.gif'}}"></img>
					</div> -->
					<!-- 	<div class="btn-group  inline-block m-r" id="">
					<div class="btn btn-sm btn-default"><i class="icon-list"></i></div>
					<a class="btn btn-sm btn-default dropdown-toggle" data-toggle="dropdown" href="#">
					<span class="caret"></span>
					</a>
					<ul class="dropdown-menu pull-right">
					<li><a href="#" class="c_list">List</a></li>
					<li><a href="#" class="c_cal">Calendar</a></li>
					</ul>
					</div> -->
					<div class="inline-block m-r m-r-sm-imp" id="calendarAgendaButtons">
						<button type="button" class="btn btn-sm btn-default btn-default-imp-white btn-lg-imp m-r-md-imp" onclick="today()">{{agile_lng_translate 'portlets' 'today'}}</button>
						<div class="btn-group m-l-xs m-l-n-xs-imp">
							<button id="agendaDay" class="btn btn-sm btn-default btn-default-imp btn-lg-imp agendaDayWeekMonth" >{{agile_lng_translate 'calendar' 'day'}}</button>
							<button id="agendaWeek" class="btn btn-sm btn-default btn-default-imp btn-lg-imp agendaDayWeekMonth" >{{agile_lng_translate 'calendar' 'week'}}</button>
							<button id="month" class="btn btn-sm btn-default btn-default-imp btn-lg-imp agendaDayWeekMonth" >{{agile_lng_translate 'calendar' 'month'}}</button>
						</div>
					</div>
					<div class="btn-group  inline-block" id="add-event-div">
						<div class="btn btn-sm btn-default btn-primary-imp btn-lg-imp add-event" data-toggle="modal"><i class="icon-plus-sign"></i> {{agile_lng_translate 'contact-details' 'add-event'}}</div>
						<a class="btn btn-sm btn-default dropdown-toggle btn-primary-imp btn-lg-imp" data-toggle="dropdown">
							<span class="caret"></span>
						</a>             
						<ul class="dropdown-menu pull-right c-p">
							<li><a data-toggle="modal" class="add-event">{{agile_lng_translate 'contact-details' 'add-event'}}</a></li>
							<li><a data-toggle="modal" class="add-task">{{agile_lng_translate 'contact-details' 'add-task'}}</a></li>
							<li><a href="#add-dashlet">{{agile_lng_translate 'portlets' 'add-dashlet'}}</a></li>
						</ul>
					</div>
				</div>
				<div class="clearfix"></div>
			</div>
		</div>
	</div>
	<div class="route_Portlet b-b" style="display:none">
		<div class="row">
			<div class="col-md-12">
				<div>
					<div id="portlets">&nbsp;</div>
				</div>
			</div>
		</div>
	</div>
	<div class="wrapper-md agile-p-t-sm">
		<div class="row">
			<div class="col-md-2">
				<div class="bg-transparent">
					<div class="data-block todo-block">
						<div class="data-container">
							<div id="calendar-filters"></div>
							<div id="ical_appointment_links">
								<a  href="#scheduler-prefs"  id="show-schedule-url1"><i class="icon-time"></i> {{agile_lng_translate 'calendar' 'online-scheduling'}}</a>
								<br />
								<a  href="#icalModal" class="m-t-sm m-b-sm inline-block" data-toggle="modal" id="subscribe-ical"><i class="icon-calendar"></i> {{agile_lng_translate 'calendar' 'subscribe-to-ical'}}</a>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="col-md-10">
				<div class="bg-light lter">
					<!--<div class="clearfix m-b" id="calendar-view-button" style="display:none;">
					<button type="button" tooltip="{{agile_lng_translate 'calendar' 'doubleclick-on-day-to-dreate-calendar-event'}}" class="btn btn-sm btn-primary btn-addon add-event">
					<i class="fa fa-plus"></i>Add
					</button>
					<div class="pull-right">

					<button type="button" class="btn btn-sm btn-default btn-default-imp" onclick="today()">today</button>
					<div class="btn-group m-l-xs">
					<button id="agendaDay" class="btn btn-sm btn-default btn-default-imp agendaDayWeekMonth" >Day</button>
					<button id="agendaWeek" class="btn btn-sm btn-default btn-default-imp agendaDayWeekMonth" >Week</button>
					<button id="month" class="btn btn-sm btn-default btn-default-imp agendaDayWeekMonth" >Month</button>
					</div>
					</div>
					</div> -->
					<div id="calendar_event"></div>
				</div>
			</div>
		</div>
	</div>
</div>
</script>

<script id="event-filter-template" type="text/html">
<div class="widget-box" id="widget-box">
	<div id="event-filters" class="btn-group helpdesk-filters">
		<a id="event-filter-button" class="btn btn-sm btn-default dropdown-toggle" title="Filters">
			<i id="icon-filter" class="icon-filter icon-white"></i>
		</a>
		<div class="dropdown-menu pull-right m-t-xs p-n" id="filter_options"
			style="background-color: #cad2dd; right:-10px;">
			<div id="filter_list">
				<div class="arrow"></div>
				<div id="popover-content" class="popover-content">
					<div id="popup_header" class="popup_header p-b-xs">
						<span id="filters-heading" class="heading text-xs">{{agile_lng_translate 'deal-view' 'filters'}}</span> <span
							id="clear-event-filters" class="btn btn-xs btn-default pull-left"
							style="color: #475b6f; text-shadow: 0 1px 0 rgba(255, 255, 255, 0.5);">{{agile_lng_translate 'deal-view' 'clear'}}</span>
						<span id="event-filter-validate" class="btn btn-primary btn-xs pull-right save"
							style="color: #fff; text-shadow: 0 -1px 0 rgba(0, 0, 0, 0.3);">{{agile_lng_translate 'deal-view' 'done'}}</span>
					</div>
					<style>
						.ticket-filter-container select, .ticket-filter-container input{
							width: 100%;
							height: 23px;
							font-size: 10px;
						}
						.ticket-filter-container label{
							font-size: 11px;
							width: 170px;
							height: 20px;
							margin-bottom: 0;
						}
						.row-filter{
							padding-top: 4px !important;
						}
					</style>
					<div id="deal-filter-container" class="deal-filter-container inner-box" style="width:243px;">
		<form id="eventsFilterForm" class="m-b-none" name="dealsFilterForm" role="form">
			<fieldset>
				<div class="control-group row-filter">
					<label class="control-label"><b>{{agile_lng_translate 'deal-view' 'owner'}} </b> 
					</label>
					<div class="controls" id="owners">
						<select id="event-owner" name="owner_id" class="form-control">
							<option value="all">{{agile_lng_translate 'portlets' 'any'}}</option>
						</select>
					</div>
				</div>
				<div class="control-group row-filter calendar-view">
					<label class="control-label"><b>{{agile_lng_translate 'contacts-view' 'type'}} </b>
					</label>
					<div class="controls" id="type_div">
						<span><select id="event_type" name="type" class="form-control">
								<option value="">{{agile_lng_translate 'contacts-view' 'all'}}</option>
								<option value="google">{{agile_lng_translate 'prefs-data-sync' 'google'}}
								</option>
								<option value="agile">{{agile_lng_translate 'contact-details' 'agile'}}
								</option>
						</select></span>
					</div>
				</div>
				<div class="control-group row-filter list-view">
					<label class="control-label"><b>{{agile_lng_translate 'report-add' 'time'}} </b>
					</label>
					<div class="controls" id="time_div">
						<span><select id="event_time" name="time" class="form-control">
								<option value="">{{agile_lng_translate 'calendar' 'all-events'}}</option>
								<option value="future">{{agile_lng_translate 'calendar' 'future-events'}}
								</option>
						</select></span>
					</div>
				</div>
			</fieldset>
		</form>
		<!-- form id="dealsCustomFilterForm" name="dealsCustomFilterForm" role="form">
			<fieldset></fieldset>
		</form -->
					</div>
					<!-- End of filters-container -->
				</div>
				<!-- popover-content -->
			</div>
		</div>
		<!-- dropdown-menu class div-->
	</div>
</script>
<script id="event-left-filter-template" type="text/html">
<div>
<!--<span id="heading"><h4></h4></span><br/>-->
<div id="user_calendars">
<label><h4 class="m-b-n-sm">{{agile_lng_translate 'calendar' 'my-calendars'}}</label></h4><br/>
	  <div><label class="i-checks i-checks-sm">
        <input type="checkbox" class="calendar_check" value="agile">
        <i></i>    {{agile_lng_translate 'contact-details' 'agile'}}             
      </label></div>
	  <div><label class="i-checks i-checks-sm hide" id="office_cal">
         <input type="checkbox" class="calendar_check" value="office">
         <i></i>     {{agile_lng_translate 'calendar' 'office365'}}          
      </label></div>
	  <div><label class="i-checks i-checks-sm hide" id="google_cal">
        <input type="checkbox" class="calendar_check" value="google">
        <i></i>     {{agile_lng_translate 'prefs-data-sync' 'google'}}           
      </label></div>
	  <div class="hide" id="google_cal_link">
      	<span style="margin-left:26px;font-size: 12px;"> <a  href="#sync" class="text-muted">
      	<i class="fa fa-plus-square"></i> {{agile_lng_translate 'calendar' 'add-google-calendar'}}</a>
        </span>
      </div>
      <div class="hide" id="office_cal_link">
        <span style="margin-left:26px;font-size: 12px;"> <a  href="#sync" class="text-muted">
        <i class="fa fa-plus-square"></i> {{agile_lng_translate 'calendar' 'add-office-365-calendar'}}</a>
        </span>           
              </div>
</div>
<div id="user_cal_sub">
{{#if this.length}}
<label><h4 class="m-t-sm m-b-sm">{{agile_lng_translate 'calendar' 'team'}}</label></h4>
{{/if}}
{{#each this}}
<label class="i-checks i-checks-sm">
                <input type="checkbox" data="{{this.domain_user_id}}" class="calendar_user_check" value="{{this.id}}">
                <i></i>    {{this.name}}             
              </label><br/>{{/each}}
</div>
<div id="list_event_time" class='m-b-md hide'>
<label class="control-label">{{agile_lng_translate 'calendar' 'showing'}} 
					</label>
					
						<span><select id="event_time" name="event_time" class="form-control">
								<option value="">{{agile_lng_translate 'calendar' 'all-events'}}</option>
								<option value="future">{{agile_lng_translate 'calendar' 'future-events'}}
								</option>
						</select></span>
					</div>


</div>
</script>

<script id="calendar-popover-meeting-type-template" type="text/html">
    {{#if event.description}}
        {{#if event.meeting_type}}
	    	<i class="icon-comment-alt text-muted m-r-xs pull-left"></i>
	    	<span>{{agile_lng_translate 'calendar' 'meeting-type'}} - {{event.meeting_type}}</span><br/>
	    	<div  style="-webkit-line-clamp : 5; overflow: hidden;
    text-overflow: ellipsis;
    display: -webkit-box; -webkit-box-orient:vertical; margin-left:18px;
 " title="{{event.description}}">{{event.description}}</div>
	    {{else}}
	         <i class="icon-comment-alt text-muted m-r-xs pull-left"></i>
		         <div  style="-webkit-line-clamp : 5; overflow: hidden;
	    text-overflow: ellipsis;
	    display: -webkit-box; -webkit-box-orient:vertical;
 " title="{{event.description}}">{{event.description}}</div>
	    {{/if}}
	{{/if}}
</script>
<script id="calendar-popover-contacts-template" type="text/html">
    {{#if event.contacts}}
	   {{#if event.contacts.length}}
	   		<i class="icon-user text-muted m-r-xs"></i>
	   {{/if}}
	   {{#if_equals event.contacts.length 1}}
               {{#if_equals event.contacts.[0].type "COMPANY"}}
              
               <a class="text-info" href="#company/{{event.contacts.id}}">
                      {{getPropertyValue event.contacts.[0].properties "name"}}
                    </a>
                    {{else}}
                    <a class="text-info" href="#contact/{{event.contacts.id}}">
                      {{getPropertyValue event.contacts.[0].properties "first_name"}}
                    </a>
                    {{/if_equals}}
                     <div class="clearfix"></div>
                    {{#property_is_exists "email" event.contacts.[0].properties }}
                    <div><i class="icon-envelope text-muted m-r-xs"></i><a>{{getPropertyValue event.contacts.[0].properties "email"}}</a></div>{{/property_is_exists}}
                   {{#property_is_exists "phone" event.contacts.[0].properties }}
                    <div><i class="icon-call-end text-muted m-r-xs"></i><a>{{getPropertyValue event.contacts.[0].properties "phone"}}</a></div>{{/property_is_exists}}
                   <div class="pull-left"><i class="icon-trophy text-muted m-r-xs" style="height: 6px; vertical-align: middle;font-size:1em;"></i> <a>{{event.contacts.[0].lead_score}}</a></div>
                  <div class="pull-right">{{setupRating event.contacts.[0].star_value}}</div> 
                   
    	 {{else}}
     {{#each event.contacts}}
               {{#if_equals this.type "COMPANY"}}
                    <a class="text-info" href="#company/{{this.id}}">
                      {{getPropertyValue this.properties "name"}}
                    </a>
                  {{else}}
                      <a class="text-info" href="#contact/{{this.id}}">
                      {{contact_name_necessary this }}
                    </a>
             {{/if_equals}}   
         {{#if @last}} {{else}}, {{/if}}
     {{/each}}
     {{/if_equals}}
	{{/if}}
</script>

<script id="office-calendar-mouseover-popover-template" type="text/html">
    <div class="fc-overlayw {{leftorright}}" style="min-width:{{popover_min_width}}px;max-width: {{popover_min_width}}px;left:{{left}}px;top:{{top}}px;position:absolute;z-index:10;display:none;">	
    	<div class="panel bg-white b-a pos-rlt p-sm">
		 	<span class="arrow {{leftorright}} {{pullupornot}}" style="top:11px;"></span> 
			 <div class="m-b-sm">
			 	<div class="pull-left text-flow-ellipsis p-b-xs" style="width:100%;">{{event.title}}</div>
			 </div>
			 {{#if event.status}}
			 <div class="pull-left text-ellipsis p-b-xs text-cap" style="width:100%;">{{agile_lng_translate 'admin-settings-users' 'status'}}: {{event.status}}</div>{{/if}}
		 	<div><i class="icon-clock text-muted m-r-xs"></i>{{event_format_time event.start 'dd-mmm-yyyy HH:MM'}}</div>
		 	<div class="text-ellipsis">
		 	    {{get_template_type "calendar-popover-contacts"}}
		 	</div>
		 	<div class=" ">
		 	     {{get_template_type "calendar-popover-meeting-type"}}
		 	</div>
		 </div>
	</div>
</script>

<script id="calendar-mouseover-popover-template" type="text/html">
	<div class="fc-overlayw {{leftorright}}" style="width:100%;min-width:{{popover_min_width}}px;max-width:{{popover_min_width}}px;left:{{left}}px;top:{{top}}px;position:absolute;z-index:10;display:none;">
	    <div class="panel bg-white b-a pos-rlt p-sm">
	       	<span class="arrow {{leftorright}} {{pullupornot}}" style="top:11px;"></span>
	       	<div class="h4 font-thin m-b-sm">
	       		<div class="pull-left text-ellipsis p-b-xs" style="width:100%;">{{event.title}}</div>
	       	</div>
	       	<div class="line b-b b-light"></div>
	       	{{#if event.status}}
	       	<div class="pull-left text-ellipsis p-b-xs text-cap" style="width:100%;">{{agile_lng_translate 'admin-settings-users' 'status'}}: {{event.status}}</div>{{/if}}
	       	<div><i class="icon-clock text-muted m-r-xs"></i>{{event_format_time event.start 'dd-mmm-yyyy HH:MM'}}
				<div class="pull-right" style="width:10%;">
					<img class="r-2x" src="{{event.owner.pic}}" height="20px" width="20px" title="{{event.owner.name}}"/>
				</div>
			</div>
			<div class="text-ellipsis">
		 	    {{get_template_type "calendar-popover-contacts"}}
		 	</div>
		 	<div class=" ">
		 	     {{get_template_type "calendar-popover-meeting-type"}}
		 	</div>
		</div>
	</div>
</script>

<script id="week-office-calendar-mouseover-popover-template" type="text/html">
	<div class="fc-overlayw {{leftorright}}" style="min-width:{{popover_min_width}}px;max-width:{{popover_min_width}}px;left:{{left}}px;top:{{top}}px;position:absolute;z-index:10;display:none;">
		<div class="panel bg-white b-a pos-rlt p-sm">
			<span class="arrow {{leftorright}} {{pullupornot}}" style="top:11px;"></span>
			<div class="m-b-sm">
				<div class="pull-left text-flow-ellipsis p-b-xs" style="width:100%;">{{event.title}}</div>
			</div>
			{{#if event.status}}
			<div class="pull-left text-ellipsis p-b-xs text-cap" style="width:100%;">{{agile_lng_translate 'admin-settings-users' 'status'}}: {{event.status}}</div>{{/if}}
			<div><i class="icon-clock text-muted m-r-xs"></i>{{event_format_time event.start 'dd-mmm-yyyy HH:MM'}}</div>
			<div class="text-ellipsis">
		 	    {{get_template_type "calendar-popover-contacts"}}
		 	</div>
		 	<div class=" ">
		 	     {{get_template_type "calendar-popover-meeting-type"}}
		 	</div>
		</div>
	</div>
</script>

<script id="week-calendar-mouseover-popover-template" type="text/html">
	<div class="fc-overlayw {{leftorright}}" style="width:100%;min-width:{{popover_min_width}}px;max-width:{{popover_min_width}}px;left:{{left}}px;top:{{top}}px;position:absolute;z-index:10;display:none;">
		<div class="panel bg-white b-a pos-rlt p-sm">
			<span class="arrow {{leftorright}} {{pullupornot}}" style="top:11px;"></span>
			<div class="h4 font-thin m-b-sm">
				<div class="pull-left text-ellipsis p-b-xs" style="width:100%;">{{event.title}}</div>
			</div>
			<div class="line b-b b-light"></div>
			{{#if event.status}}
			<div class="pull-left text-ellipsis p-b-xs text-cap" style="width:100%;">{{agile_lng_translate 'admin-settings-users' 'status'}}: {{event.status}}</div>{{/if}}
			<div><i class="icon-clock text-muted m-r-xs"></i>{{event_format_time event.start 'dd-mmm-yyyy HH:MM'}}
				<div class="pull-right" style="width:10%;">
					<img class="r-2x" src="{{event.owner.pic}}" height="20px" width="20px" title="{{event.owner.name}}"/>
				</div>
			</div>
			<div class="text-ellipsis">
		 	    {{get_template_type "calendar-popover-contacts"}}
		 	</div>
		 	<div class=" ">
		 	     {{get_template_type "calendar-popover-meeting-type"}}
		 	</div>
		</div>
	</div>
</script>	

<script id="day-office-calendar-mouseover-popover-template" type="text/html">
	<div class="fc-overlayw {{leftorright}}" style="min-width:{{popover_min_width}}px;max-width: {{popover_min_width}}px;left:{{left}}px;top:{{top}}px;position:absolute;z-index:10;display:none;">
		<div class="panel bg-white b-a pos-rlt p-sm">
			<span class="arrow {{leftorright}} {{pullupornot}}" style="top:11px;"></span>
			<div class="m-b-sm">
				<div class="pull-left text-flow-ellipsis p-b-xs" style="width:100%;">{{event.title}}</div>
			</div>
			{{#if event.status}}
			<div class="pull-left text-ellipsis p-b-xs text-cap" style="width:100%;">{{agile_lng_translate 'admin-settings-users' 'status'}}: {{event.status}}</div>{{/if}}
			<div><i class="icon-clock text-muted m-r-xs"></i>{{event_format_time event.start 'dd-mmm-yyyy HH:MM'}}</div>
			<div class="text-ellipsis">
		 	    {{get_template_type "calendar-popover-contacts"}}
		 	</div>
		 	<div class=" ">
		 	     {{get_template_type "calendar-popover-meeting-type"}}
		 	</div>
		</div>
	</div>
</script>	

<script id="day-calendar-mouseover-popover-template" type="text/html">
	<div class="fc-overlayw {{leftorright}}" style="width:100%;min-width:{{popover_min_width}}px;max-width:{{popover_min_width}}px;left:{{left}}px;top:{{top}}px;position:absolute;z-index:10;display:none;">
		<div class="panel bg-white b-a pos-rlt p-sm"  style="margin-bottom: 0px;">
			<span class="arrow {{leftorright}} {{pullupornot}}" style="top:11px;"></span>
			<div class="h4 font-thin m-b-sm">
				<div class="pull-left text-ellipsis p-b-xs" style="width:100%;">{{event.title}}</div>
			</div>
			<div class="line b-b b-light"></div>
			{{#if event.status}}
			<div class="pull-left text-ellipsis p-b-xs text-cap" style="width:100%;">{{agile_lng_translate 'admin-settings-users' 'status'}}: {{event.status}}</div>{{/if}}
			<div><i class="icon-clock text-muted m-r-xs"></i>{{event_format_time event.start 'dd-mmm-yyyy HH:MM'}}
				<div class="pull-right" style="width:10%;">
					<img class="r-2x" src="{{event.owner.pic}}" height="20px" width="20px" title="{{event.owner.name}}"/>
				</div>
			</div>
			<div class="text-ellipsis">
		 	    {{get_template_type "calendar-popover-contacts"}}
		 	</div>
		 	<div class=" ">
		 	     {{get_template_type "calendar-popover-meeting-type"}}
		 	</div>
		</div>
	</div>											
</script>

<script id="calendar-mouseover-popover-miniCalendar-template" type="text/html">
	<div class="fc-overlay {{leftorright}}" style="width:100%;">
	    <div class="panel bg-white b-a pos-rlt p-sm">
	       	<span class="arrow {{leftorright}} {{pullupornot}}"></span>
	       	<div class="h4 font-thin m-b-sm">
	       		<div class="pull-left text-ellipsis p-b-xs" style="width:100%;">{{event.title}} </div>
	       	</div>
	       	<div class="line b-b b-light"></div>
	       	{{#if event.status}}
	       	<span class="text-cap" style="position: relative;top: -4px;">{{agile_lng_translate 'admin-settings-users' 'status'}}: {{event.status}}
	       	</span>{{/if}}
	       	<div><i class="icon-clock text-muted m-r-xs"></i>{{event_format_time event.start 'dd-mmm-yyyy HH:MM'}}
				<div class="pull-right" style="width:10%;">
					<img class="r-2x" src="{{event.owner.pic}}" height="20px" width="20px" title="{{event.owner.name}}"/>
				</div>
			</div>
			<div class="text-ellipsis">
		 	    {{get_template_type "calendar-popover-contacts"}}
		 	</div>
		 	<div class=" " >
		 	     {{get_template_type "calendar-popover-meeting-type"}}
		 	</div>
		</div>
	</div>
</script>								
