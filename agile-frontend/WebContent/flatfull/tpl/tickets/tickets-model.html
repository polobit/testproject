<script id="ticket-model-template" type="text/html">
	<li id="{{id}}" class="p-l-xxl list-group-item clearfix b-l {{#if_equals priority 'HIGH'}}b-l-3x {{toLowerCase priority}}-priority{{/if_equals}} data ticket"  data-id="{{id}}">
    <div class="checkbox-st">
      <label class="i-checks i-checks-sm">
        <input class="each-ticket ticket-checkbox" type="checkbox" data-ticket-id="{{id}}">
        <i></i>
      </label>
    </div>
    <a class="avatar thumb pull-left m-r m-l-sm b b-l cursor-pointer open-ticket" href="javascript:void(0);">
      {{#if contact.properties}}
        <img data-name="{{dataNameAvatar contact.properties 42}}" src="{{gravatarurl contact.properties 24}}">
      {{else}}    
        <img src="{{emailGravatarurl 42 requester_email}}">
      {{/if}}  
    </a>
    <div class="pull-right text-sm text-muted p-l-sm b-l" style="min-width: 20%;">
      <table class="onlySorting">
        <tr>
          <td><span class="text-muted">Assignee: </span></td>
          <td class="p-l-sm">
            <div class="assignee-change pos-rlt show-caret">
              <a class="btn btn-sm p-n b-n first-letter-cap inline-block m-r-xs txt-small assignee" data-toggle="dropdown">
                {{#if assigneeID}}{{assignee.name}}{{else}}-{{/if}}
              </a>
              <a class="btn btn-sm p-n dropdown-toggle b-n display-none" data-toggle="dropdown" aria-expanded="false">
                <span class="caret"></span>
              </a>
              <ul class="dropdown-menu dropdown-menu-right ul-select ul-select-assignee" data-ticket-id="{{id}}">
                
              </ul>
            </div>
          </td>
        </tr>
        <tr><td><span class="text-muted">Status: </span></td>
            <td class="p-l-sm">
              <div class="assignee-change pos-rlt show-caret">
                <a class="btn btn-sm p-n b-n first-letter-cap inline-block txt-small m-r-xs status" data-toggle="dropdown">
                  {{status}}
                </a>
                <a class="btn btn-sm p-n dropdown-toggle b-n display-none" data-toggle="dropdown" aria-expanded="false">
                  <span class="caret"></span>
                </a>
                <ul class="dropdown-menu dropdown-menu-right ul-select" data-ticket-id="{{id}}">
                  <li><a href="javascript:void(0);" value="OPEN" data-field="status">Open</a></li>
                  <li><a href="javascript:void(0);" value="PENDING" data-field="status">Pending</a></li>
                  <li><a href="javascript:void(0);" value="CLOSED" data-field="status">Closed</a></li>
                </ul>
              </div>
            </td>
        </tr>
        <tr><td><span class="text-muted">Priority: </span></td>
            <td class="p-l-sm">
              <div class="assignee-change pos-rlt show-caret">
                <a class="btn btn-sm p-n b-n first-letter-cap inline-block txt-small m-r-xs priority" data-toggle="dropdown">
                  {{priority}}
                </a>
                <a class="btn btn-sm p-n dropdown-toggle b-n display-none" data-toggle="dropdown" aria-expanded="false">
                  <span class="caret"></span>
                </a>
                <ul class="dropdown-menu dropdown-menu-right ul-select" data-ticket-id="{{id}}">
                  <li><a href="javascript:void(0);" value="LOW" data-field="priority">Low</a></li>
                  <li><a href="javascript:void(0);" value="MEDIUM" data-field="priority">Medium</a></li>
                  <li><a href="javascript:void(0);" value="HIGH" data-field="priority">High</a></li>
                </ul>
              </div>
            </td>
        </tr>
      </table>
    </div>
    <div class="pull-right cursor-pointer open-ticket text-sm text-muted text-right m-r-sm">
      <time class="time-ago" datetime="{{epochToHumanDate "" last_updated_time}}">{{epochToHumanDate "ddd mmm dd yyyy HH:MM:ss" last_updated_time}}
      </time>
      {{#if attachments_exists}}
        <i class="fa fa-paperclip m-l-sm" aria-hidden="false"></i>
      {{/if}}
      <div class="due-text m-t-xs">
        {{#if due_time}}
          {{{calculate_due_date due_time}}}
        {{else}}
          <span class="label bg-danger pull-right description-hidden">Overdue</span>
        {{/if}}
      </div>
    </div>
    <div class="clear cursor-pointer open-ticket">
      <div class="subject-row tags-row">
        <a class="text-md" href="javascript:;">

          {{requester_name}} 

          {{#get_ticket_labels_from_ids labels this}}{{/get_ticket_labels_from_ids}}

          {{#if labelsJSON}}

              {{#each labelsJSON}}<span class="label bg-light m-l-xs font-bold" style="background-color: {{color_code}};">{{label}}</span>
              {{/each}}
          
          {{/if}}

        </a>
      </div>
      <div class="text-ellipsis m-t-xs">{{subject}}</div>
    </div>
    <div id="ticket-last-notes" class="ticket-last-notes" 
      style="min-height: {{#if_equals status 'NEW'}}130px;{{else}}230px;{{/if_equals}}">
      <div class="row m-n mar-btm-md last-notes-drp-dwn p-t">
        <div class="col-md-12 pad-all-sm">
          <span>Last Reply</span>
          <span class="text-light txt-small pull-right">
            {{epochToHumanDate "mmm dd, yyyy HH:MM" last_updated_time}}&nbsp;
            <!--<span class="label label-primary first-letter-cap inline-block {{toLowerCase priority}}-priority-bg">
              {{priority}}
            </span>-->
          </span>
        </div>
        <div id="recent-reply-notes" class="col-md-12 p-t-sm p-b recent-reply-notes">
          {{{last_reply_text}}}  
        </div>
      </div>
      {{#if_equals status 'NEW'}}
      {{else}}
        <div class="row m-n mar-btm-md last-notes-drp-dwn">  
          <div class="col-md-12 pad-all-sm">
            <hr class="m-t m-b">
            <span>First Reply</span>
            <span class="text-light txt-small pull-right">
              {{epochToHumanDate "mmm dd, yyyy HH:MM" created_time}}&nbsp;
            </span>
          </div>
          <div id="recent-reply-notes" class="col-md-12 p-t-sm p-b recent-reply-notes">
            {{{first_notes_text}}}
          </div>
        </div>
      {{/if_equals}}
    </div>
  </li>
</script>
<script id="ticket-single-row-model-template" type="text/html">
  <td  class="select_checkbox c-p">
    <label class="i-checks i-checks-sm">
      <input type="checkbox" class="tbody_check"><i></i>                
    </label>
  </td>
  <td class="data first-letter-cap" data="{{id}}">
    <div class="row m-n" style="width: 10em;">{{subject}}</div>
  </td>
  <td class="first-letter-cap">
    <div class="text-ellipsis" style="width: 10em;">
      <a class="text-cap">{{requester_name}}</a>
    </div>
  </td>
  <td>
    {{#unless labels.length}}
    {{else}}
      <div class="overflow-hidden line-clamp line-clamp-2" style="width:15em;">   
        {{#each labels}}
          <span class="label bg-light dk text-tiny">{{label}}</span> 
        {{/each}}
      </div>
    {{/unless}}
  </td>
  <td class="first-letter-cap">
    <div class="text-ellipsis" style="width: 10em;">
      <a class="text-cap">{{#if assigneeID}}{{assignee.name}}{{else}}-{{/if}}</a>
    </div>
  </td>  
  <td>
    {{#if due_time}}
      {{{calculate_due_date due_time}}}
    {{else}}
      -
    {{/if}}
  </td>
  <td>
    <span class="label {{toLowerCase priority}}-priority-bg first-letter-cap text-tiny inline-block">
      {{priority}}
    </span>
  </td>
  <td>
    <span class="label bg-light dk text-tiny first-letter-cap inline-block">
      {{status}}
    </span>
  </td>
</script>
<script  id="ticket-model-change-assignee-template" type="text/html">
  {{#each this}}
    {{#group_users}}
      <li>
        <a href="javascript:void(0);" data-group-name="{{../group_name}}" data-group-id="{{../id}}" value="{{id}}">
          {{../group_name}}/{{name}}
        </a>
      </li>
    {{/group_users}}
  {{/each}}  
</script>