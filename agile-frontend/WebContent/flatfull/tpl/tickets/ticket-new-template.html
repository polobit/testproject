<script id="ticket-new-modal-template" type="text/html">
<div class="modal-dialog">
  <div class="modal-content ticket-modal-content">
    <div class="modal-header ticket-modal-header">
      <button class="close" data-dismiss="modal">&times;</button>
      <div class="ticket-modal-heading">
      {{#isNewTheme}}
      <i class="icon-plus-sign pull-left m-r-xs link-color" style="margin-top: 1px;"></i>{{else}}{{/isNewTheme}}
      <h3 class="modal-title"><i class="icon icon-envelop"></i> {{agile_lng_translate 'tickets' 'create-ticket'}}</h3>
      </div>
    </div>
    <div id="modal-body">
      <div class="modal-body">
        <form id="new-ticket" name="new-ticket">
          <fieldset>
            <div class="control-group form-group search-contact-row m-b-sm">
              <div class="row">
                  <input type="hidden" id="contact_id" name="contact_id">
                  <input type="hidden" id="requester_name" name="requester_name">
                  {{#isNewTheme}}
                  <div class="control-group col-md-12">
                  {{else}} <div class="control-group col-md-6">{{/isNewTheme}}
                      <label class="control-label">{{agile_lng_translate 'menu' 'email'}} 
                      <span class="field_req">*</span></label>
                      <span class="controls">
                        <input type="text" id="requester_email" autocomplete="off" name="requester_email" placeholder="{{agile_lng_translate 'tickets' 'search-contacts'}}" class="required form-control tickets_email">
                        {{#isNewTheme}}
                        <i class="icon-plus-sign pull-left m-t-xs link-color"></i>
                        <a class="text-xs pull-left m-t-xs link-color add-ticket-contact" href="javascript:void(0);">
                          {{agile_lng_translate 'tickets' 'add-new-contact'}}
                        </a>
                        {{else}}
                          <a class="text-xs pull-right link-color add-ticket-contact" href="javascript:void(0);">
                          {{agile_lng_translate 'tickets' 'add-new-contact'}}
                        </a>
                        {{/isNewTheme}}
                      </span>
                  </div>
                  
              </div>
            </div>
            <div class="control-group form-group new-contact-row display-none m-b-sm">
              <div class="row">
                  <div class="control-group col-md-6">
                      <label class="control-label">{{agile_lng_translate 'other' 'first-name'}} <span class="field_req">*</span></label>
                      <span class="controls">
                        <input type="text" id="first_name" autocomplete="off" name="first_name" placeholder="{{agile_lng_translate 'tickets' 'eg-mark'}}" 
                        class="required form-control">
                      </span>
                  </div>
                  <div class="control-group col-md-6">
                      <label class="control-label">{{agile_lng_translate 'other' 'last-name'}}
                      </label>
                      <span class="controls">
                        <input type="text" id="last_name" autocomplete="off" name="last_name" placeholder="{{agile_lng_translate 'tickets' 'eg-twain'}}" 
                        class="form-control">
                      </span>
                  </div>
              </div>
            </div>
            <div class="control-group form-group new-contact-row display-none m-b-sm">
              <div class="row">
                  <div class="control-group col-md-12">
                      <label class="control-label">{{agile_lng_translate 'menu' 'email'}} 
                      <span class="field_req">*</span></label>
                      <span class="controls">
                        <input type="text" id="email_input" autocomplete="off" name="email_input" placeholder="{{agile_lng_translate 'tickets' 'eg-email'}}" class="required form-control tickets_email">
                        <a class="text-xs pull-right link-color add-ticket-contact m-t-xs" href="javascript:void(0);">

                          {{agile_lng_translate 'tickets' 'search-contact'}}

                        </a>
                      </span>
                  </div>
              </div>
            </div>
            {{#isNewTheme}}
            <div class="control-group form-group">
              <div class="row">
                  <div class="control-group col-md-12">
                    <label class="control-label">{{agile_lng_translate 'other' 'subject'}}
                    <span class="field_req">*</span></label>
                    <span class="controls">
                      <input type="text" name="subject" autocomplete="off" class="form-control required"  placeholder="{{agile_lng_translate 'other' 'subject'}}">
                    </span>
                  </div>
              </div>
            </div>
            <div class="control-group form-group">
              <div class="row">
                  <div class="control-group col-md-12">
                      <label class="control-label">{{agile_lng_translate 'other' 'cc'}}</label>
                      <span class="controls">
                        <div class="cc-emails-st">
                          <ul class="cc-emails m-n p-n ccemailul" name="cc_emails">
                              <li class="tag m-r-xs m-b-xs block tag-li tag-new-theme">
                                <input type="text" placeholder="{{agile_lng_translate 'tickets' 'search-contacts'}}" id="cc_email_field" class="cc_emails_st" autocomplete="off">
                                <i class="fa fa-envelope pull-right m-t-xs"></i>
                              </li>
                          </ul>
                        </div>  
                      </span>
                  </div>
              </div>
            </div>
            {{else}}
            <div class="control-group form-group">
              <div class="row">
                  <div class="control-group col-md-6">
                    <label class="control-label">{{agile_lng_translate 'other' 'subject'}} 
                    <span class="field_req">*</span></label>
                    <span class="controls">
                      <input type="text" name="subject" autocomplete="off" class="form-control required"  placeholder="{{agile_lng_translate 'other' 'subject'}}">
                    </span>
                  </div>
                  <div class="control-group col-md-6">
                      <label class="control-label">{{agile_lng_translate 'other' 'cc'}}</label>
                      <span class="controls">
                        <div class="cc-emails-st">
                          <ul class="cc-emails m-n p-n ccemailul" name="cc_emails">
                              <li class="tag m-r-xs m-b-xs inline-block tag-new-theme">
                                <input type="text" placeholder="{{agile_lng_translate 'tickets' 'search-contacts'}}" id="cc_email_field" class="cc_emails_st" autocomplete="off">
                              </li>
                          </ul>
                        </div>  
                      </span>
                  </div>
              </div>
            </div>
            {{/isNewTheme}}
            <div class="control-group form-group">
              <div class="row">
                  <div class="control-group col-md-6">
                      <label class="control-label">{{agile_lng_translate 'tasks' 'priority'}}
                      </label>
                      <span class="controls">
                        <select id="priority" name="priority" class="form-control">
                            <option value="LOW">{{agile_lng_translate 'tasks' 'Low'}}</option>
                            <option value="MEDIUM">{{agile_lng_translate 'tickets' 'medium'}}
                            </option>
                            <option value="HIGH">{{agile_lng_translate 'tasks' 'High'}}</option>
                        </select>
                      </span>
                  </div>
                  <div class="control-group col-md-6">
                      <label class="control-label">{{agile_lng_translate 'portlets' 'status'}}</label>
                      <span class="controls">
                        <select id="status" name="status" class="form-control status">
                            <option value="OPEN">{{agile_lng_translate 'contact-details' 'OPEN'}}
                            </option>
                            <option value="PENDING">{{agile_lng_translate 'tickets' 'pending'}}
                            </option>
                            <option value="CLOSED">{{agile_lng_translate 'cases' 'closed'}}
                            </option>
                        </select>
                      </span>
                  </div>
              </div>
            </div>
            <div class="control-group form-group">
              <div class="row">
                  <div class="control-group col-md-6">
                    <label class="control-label">{{agile_lng_translate 'tickets' 'assignee'}}
                    </label>
                      <span class="controls">
                        <select id="groupID" name="groupID" class="form-control required group_id">
                          
                        </select>
                      </span>
                  </div>
                  <div class="control-group col-md-6">
                      <label class="control-label block">{{agile_lng_translate 'tickets' 'labels'}}</label>
                      <span class="controls">
                        <select name="labels" data-placeholder="{{agile_lng_translate 'tickets' 'search-labels'}}" class="chosen-select form-control" multiple class="w-md">
                        </select>
                      </span>
                  </div>
              </div>
            </div>
            <div class="control-group form-group">
              <div class="row">
                  <div class="control-group col-md-12">
                    <label class="control-label">{{agile_lng_translate 'other' 'message'}}
                    <span class="field_req">*</span></label>
                    <span class="controls">
                      <textarea name="html_text" class="form-control required create_ticket_textarea" style="min-height:76px;max-height:400px;text-indent: 0px; overflow-y: hidden; resize: none;padding: 8px;"></textarea>
                    </span>
                  </div>
              </div>
            </div>
          </fieldset>  
        </form>
      </div>
      <div class="modal-footer ticket-modal-footer">
          <span class="form-action-error pull-left" style="color: red;"></span>
          {{#isNewTheme}}
          <a href="javascript:void(0);" data-dismiss="modal" class="ticket-modal-cancel">Cancel</a> 
          {{else}}
          <a href="javascript:void(0);" data-dismiss="modal" class="btn btn-sm btn-default">{{agile_lng_translate 'report-add' 'close'}}</a> 
          {{/isNewTheme}}
          <a id="create-ticket" href="javascript:void(0);" class="btn btn-sm {{#isNewTheme}}btn-mlg-imp{{/isNewTheme}} btn-primary save" data-loading-text="Create">{{agile_lng_translate 'tickets' 'create'}}</a>
          <span class="save-status"></span>
      </div>
    </div>
  </div>
</div>
</script>
<script id="ticket-tag-template" type="text/html">
  <li class="tag btn btn-xs btn-default m-r-xs m-b-xs inline-block" data="{{tag}}">
    <span>
      <a class="anchor m-r-xs" href="javascript:void(0);">{{tag}}</a>
      <a class="close remove-ticket-tags text-lg" tag="{{tag}}">&times</a>
    </span>
  </li>
</script>

<script id="cc-email-li-template" type="text/html">
  <li class="tag btn btn-xs btn-default m-r-xs m-b-xs inline-block" data="{{email}}">
    <span>
      <a class="anchor m-r-xs {{#if err_email}}boder-btm-dot{{/if}}" style="vertical-align:middle" href="javascript:void(0);" >
        {{email}}
      </a>
      <a class="close {{#if new_ticket}}{{else}}remove-ticket-cc-emails{{/if}} text-lg" style="vertical-align:middle;float:none;line-height:2px;">&times</a>
    </span>
  </li>
</script>

<script id="forward-email-li-template" type="text/html">
  <li class="tag btn btn-xs btn-default m-r-xs m-b-xs inline-block" data="{{email}}">
    <span>
      <a class="anchor m-r-xs {{#if err_email}}boder-btm-dot{{/if}}" href="javascript:void(0);" style="vertical-align:middle" >{{email}}</a>
      <a class="close remove-ticket-forward-emails text-lg" style="vertical-align:middle;float:none;line-height:2px;">&times</a>
    </span>
  </li>
</script>

<script id="ticket-attachment-li-template" type="text/html">
  <li class="tag btn btn-xs btn-default m-r-xs m-b-xs inline-block" file-name="{{name}}" url="{{url}}" size="{{size}}">
    <span>
      <i class="fa fa-paperclip"></i> <a class="anchor m-r-xs" href="{{url}}" target="_blank">{{name}}</a>
      <a class="close remove-attachment text-lg">×</a>
    </span>
  </li>
</script>
<script id="select-assignee-dropdown-template" type="text/html">
{{#each this}}
    <option value="{{id}}">{{group_name}}</option>
{{/each}}
<option role='separator' disabled>------------------------------------------------------</option>
{{#each this}}
  <optgroup data-group-id="{{id}}" data-group-email="{{group_email}}" label="{{group_name}}">
    {{#group_users}}
      <option data-assignee-id="{{id}}" value="{{../id}}" {{#if ../is_default}}
        {{#is_current_logged_in_user id}}selected{{/is_current_logged_in_user}}{{/if}}>
        {{name}}
      </option>
    {{/group_users}}
  </optgroup>
{{/each}}
</script>
<script id="select-assignee-ticket-dropdown-template" type="text/html">

<option value="0">{{agile_lng_translate 'deal-view' 'select'}}</option>

{{#each this}}
    <option value="{{id}}" group_id="{{id}}">{{group_name}}</option>
{{/each}}
<option role='separator' disabled>------------------------------------------------------</option>
{{#each this}}
  <optgroup data-group-id="{{id}}" data-group-email="{{group_email}}" label="{{group_name}}">
    {{#group_users}}
      <option data-assignee-id="{{id}}" value="{{../id}}" {{#if ../is_default}}
        {{#is_current_logged_in_user id}}selected{{/is_current_logged_in_user}}{{/if}}>
        <img src="{{get_contact_image 24}}" class="r-5x" alt="..." 
          onerror="image_error(this);" _data-name="{{getInitials name}}">{{name}}
      </option>
    {{/group_users}}
  </optgroup>
{{/each}}
</script>