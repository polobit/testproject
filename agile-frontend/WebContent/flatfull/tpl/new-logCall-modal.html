
<script type="text/html" id="phoneLogModal-template">
  <div class="modal-dialog">
    <div class="modal-content">
    <div class="modal-header">
        <button class="close" data-dismiss="modal">x</button>
        <h3 class="modal-title">
		{{#if_equals action "edit"}}	
			<i class="icon-edit"></i>&nbsp;Edit call log
			{{else}}
			<i class="icon-plus-sign"></i>&nbsp;Log a call	
		{{/if_equals}}
		</h3>
    </div>
    <div class="modal-body">
        <form id="phoneLogForm" name="phoneLogForm" method="post">
            <fieldset>
              {{#if_equals action "edit"}}	
					<input name="id" type="hidden"/>
					<input name="created_time" type="hidden"/>					
			{{/if_equals}}      
<input id="saveActivity" type="hidden" value = "false"/>
<input id="callWidgetName" type="hidden" value = ""/>

                <div class="control-group form-group">
                    <label class="control-label"><b>{{agile_translate "widgets" "subject"}}</b> <span class="field_req">*</span></label>
                    <div class="controls">
                        <input type="text" placeholder="About" name="subject" id="subject" class="form-control" />
                    </div>
                    <span id="logPhone_subject_error" style="color:#d9534f;display:none;">Subject required.</span>
                </div>
                
                <div class="control-group form-group">
                    <label class="control-label col-lg-3 pull-left p-l-none"><b>{{agile_translate "widgets" "phone-number"}}</b> <span class="field_req">*</span></label>
                     <div class="controls contact_phone_controls">


	{{#if_equals num.length "0"}}
		<span  title="Add Phone" class="add_logPhone_span">
			<a id="contact_logPhone_number" class="contact_logPhone_number add_logPhone text-info text-l-none" name="contact_logPhone_number" value = ""> {{agile_translate "contact-edit" "add-phone"}}</a>
        </span>
	{{else}}
		{{#if_equals num.length "1"}}
			{{#if num.[0]}}
				<span id="contact_logPhone_number" name="contact_logPhone_number" value="{{num.[0]}}" >{{num.[0]}}</span>
			{{else}}
				<span  title="Add Phone" class="add_logPhone_span">
					<a id="contact_logPhone_number" class="contact_logPhone_number add_logPhone text-info text-l-none" name="contact_logPhone_number" value = ""> {{agile_translate "contact-edit" "add-phone"}}</a>
        		</span>
			{{/if}}
		{{else}}
				<a class="dropdown-toggle " data-toggle="dropdown" aria-expanded="false"> 
	     		      <button id="phoneButton" type="button" class="btn btn-default">
							<span  id="contact_logPhone_number" class="contact_logPhone_number" name="contact_logPhone_number" value = ""> {{agile_translate "deal-view" "select"}}</span>
       				   		<span class="caret"></span>
	                  </button>
				</a>
						<ul class="dropdown-menu" style="top:121px;left: 157px;" role="menu">
							{{#each num}}<li><a id = "logPhone_number_option" value = "{{this}}">{{this}}</a></li> {{/each}}
						</ul>
		{{/if_equals}}	
	{{/if_equals}}	
						<span id="contact-add-phone-span" class="none"> 
								<input type="text" id="contact_phone" style="border: 1px solid #CFDADD;height:30px;" /> 
								<a class= "btn btn-primary btn-sm contact_phone_add" style="height:30px;margin-top:-3px;"> {{agile_translate "other" "add"}}</a>   
						</span>
						
					</div>
					<span id="logPhone_number_error" style="color:#d9534f;display:none;">Phone number required.</span>
                </div>
                
                <div class="control-group form-group">
                    <label class="control-label col-lg-3 pull-left p-l-none"><b>Call {{agile_translate "contacts-view" "type"}}</b> <span class="field_req">*</span></label>
                    <div class="controls">
                      <label class="i-checks">
               					  <input type="radio" name="callType" id="callType" checked="checked" value="inbound" title="Inbound">
								<i></i>
               					 Inbound
 						</label>
 								&nbsp;&nbsp;&nbsp;
					 <label class="i-checks">
               					 <input type="radio" name="callType" id="callType" value="outbound-dial" title="Outbound">
								<i></i>
               					 Outbound
              		  </label>
                    </div>
                </div>
                
                 <div class="control-group form-group">
                    <label class="control-label col-lg-3 pull-left p-l-none"><b>{{agile_translate "widgets" "status"}}</b> <span class="field_req">*</span></label>
                    <div class="controls">
                    
                    <a href="" class="dropdown-toggle" data-toggle="dropdown" aria-expanded="false"> 
    				      <button id="statusButton" type="button" class="btn btn-default">
    						  				  
								<span  id="callStatus" class="callStatus" name="status" value = ""> {{agile_translate "deal-view" "select"}}</span>
         				   		<span class="caret"></span>
							
 							</button>
						</a>
								<ul class="dropdown-menu" style="top:196px;left: 157px;" role="menu">
									<li><a id = "statusValue"  value = "answered">{{agile_translate "campaigns" "answered"}}</a></li>
									<li><a id = "statusValue"  value = "busy">{{agile_translate "campaigns" "busy"}}</a></li>
									<li><a id = "statusValue"  value = "failed">{{agile_translate "campaigns" "failed"}}</a></li>
									<li><a id = "statusValue"  value = "missed">{{agile_translate "campaigns" "missed"}}</a></li>
									<li><a id = "statusValue"  value = "inquiry">{{agile_translate "campaigns" "inquiry"}}</a></li>
									<li><a id = "statusValue"  value = "interest">{{agile_translate "campaigns" "interest"}}</a></li>
									<li><a id = "statusValue"  value = "no interest">{{agile_translate "campaigns" "no-interest"}}</a></li>
									<li><a id = "statusValue"  value = "incorrect referral">{{agile_translate "campaigns" "incorrect-referral"}}</a></li>
									<li><a id = "statusValue"  value = "meeting scheduled">{{agile_translate "campaigns" "meeting-scheduled"}}</a></li>
									<li><a id = "statusValue"  value = "new opportunity">{{agile_translate "campaigns" "new-opportunity"}}</a></li>
									<li><a id = "statusValue"  value = "voicemail">{{agile_translate "campaigns" "voicemail"}}</a></li>
								</ul>
								
                    </div>
                    <span id="logPhone_status_error" style="color:#d9534f;display:none;">Status not declared.</span>
                </div>
                
                 <div class="control-group form-group">
                    <label class="control-label"><b>{{agile_translate "portlets" "duration"}}</b> <span class="field_req">*</span></label>
                    <div class="controls">
                        <input type="text" name="hour" id="hour" value="0" style = "max-width:42px;"/>&nbsp;<span class="label label-default">hours</span> &nbsp;&nbsp;
                        <input type="text" name="min" id="min" value="0" style = "max-width:42px;"/>&nbsp;<span class="label label-default">minutes</span> &nbsp;&nbsp;
                        <input type="text" name="sec" id="sec" value="0" style = "max-width:42px;"/>&nbsp;<span class="label label-default">seconds</span>
                    </div>
					<span id="logPhone_duration_error" style="color:#d9534f;display:none;">For minutes and seconds, please enter values between 0-59 only.</span>
					<span id="logPhone_duration_error1" style="color:#d9534f;display:none;">Duration should be in positive values only.</span>
					<span id="logPhone_duration_error2" style="color:#d9534f;display:none;">Duration cannot be zero for selected call status.</span>
                </div>
                
                
	                <div class="control-group form-group">
	                    <label class="control-label"><b>{{agile_translate "other" "description"}}</b></label>
	                    <div class="controls">
	                        <textarea rows="3" class="form-control-F-width form-control" placeholder="Detailed Note" name="description" id="description" style="max-width:400px;"></textarea> 
	                    </div>
	                </div>
                
                
                <div class="control-group form-group">
                    <label class="control-label pull-left p-l-none"><b>{{agile_translate "deal-view" "related-to"}}</b><span class="field_req">*</span> </label>
                    <div class="controls">
                        <div>
                     <input type="text" placeholder="Contact Name" id="call_related_to" class="typeahead typeahead_contacts form-control" data-provide="typeahead" data-mode="multiple" size="40" />
                     <div class="controls" style="padding-top:1px">
                      <ul id="logPhone_relatedto_tag" name="contact_ids" class="contacts tags tagsinput p-none"></ul>
                     </div>
                     <span id="log_relatedto_error" style="color:#d9534f;display:none;">Please relate the call to a contact.</span>
                     </div>
                     </div>
                </div>
            </fieldset>
        </form>
    </div>
    <div class="modal-footer">
    <span class="save-status pull-left" style="color:#d9534f;"></span>
        <a href="#" class="btn btn-sm btn-primary" id="validate-logPhone" action = "save">
		{{#if_equals action "edit"}}	
			Update
		{{else}}
			Save
		{{/if_equals}}
        </a>
        
    </div>
    </div>
    </div>
</div>
</div>
</script>

