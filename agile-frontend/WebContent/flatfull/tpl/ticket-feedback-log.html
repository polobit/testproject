
<script id="ticket-feedback-header-template" type="text/html">

<div class="custom-animated custom-fadeInUp">
    <div class="wrapper-md lter bg-light b-b agile-page-header">
        <div class="row">
            <div class="col-sm-12 col-md-12">
                <h3 class="activity-heading font-thin h3  pull-left"><span>Feedback</span>&nbsp;<small class="activity-sub-heading" ></small></h3>
                <div id="reportrange" class="pull-right" style="box-shadow: 0 0px 0px rgba(0, 0, 0, 0), inset 0 -0 0 rgba(0, 0, 0, .1); border:1px solid #cfdadd;height:34px;padding:5px;    margin-left: 20px;">
                    <i class="icon-calendar icon-large"></i>
                    <span id="range">{{date-range "today" "-6"}}</span>
                    
              </span>
                </div>

    
                    <select name="group_names" class="form-control select-new-theme-nopanel" id="group_names" style="width: 160px;float: right;margin-left: 20px;">
                    </select>
                                          

                <select name="feedback" class="form-control  select-new-theme-nopanel" id="feedback" style="width: 160px;float: right;margin-left: 20px;">
                    <option value="">{{agile_lng_translate 'tickets' 'feedback-all'}}</option>
                    <option value='1'>{{return_feedback_title "1"}}</option>
                    <option value='2'>{{return_feedback_title "2"}}</option>
                    <option value='3'>{{return_feedback_title "3"}}</option>
                    <option value='4'>{{return_feedback_title "4"}}</option>
                    <option value='5'>{{return_feedback_title "5"}}</option>
                </select>

     
        </div>
    </div>
    </div>
<div id="ticket-feedback" class="wrapper-lg row agile-p-t-none"></div>


</script>
<script id="ticket-feedback-log-collection-template" type="text/html">
{{#unless this.length}}
<div class="custom-animated custom-fadeInUp">
    <div class="wrapper-md lter agile-p-t-sm">
        <div class="row">
            <div class="col-sm-12 col-md-12">

        <div class="alert bg-white">
            <div class="slate-content p-md">
                <div class="box-left pull-left m-r-md">
                    <img alt="Clipboard" src="{{getS3ImagePath '/img/clipboard.png'}}" />
                </div>                
                <div class="box-right pull-left">

                    <h4 class="m-t-none" style="opacity:0.8;">You do not have any ticket feedback yet.</h4>
                </div>
                <div class="text text-center" style="opacity:0.5">
                Feedback of your ticket notes is shown here.

                </div>
				<div class="clearfix">
				</div>
            </div>
        </div>
        {{/unless}}
{{#if this.length}}  

<table class="table table-striped table-layout-mob-view {{#isNewTheme}} agile-table {{/isNewTheme}}">
      <thead>
          <tr>
              <th width="20%" style="max-width:20%;vertical-align:middle">{{agile_lng_translate 'tickets' 'feedback-contact'}}</th>
              <th width="20%" style="max-width:20%;vertical-align:middle">{{agile_lng_translate 'tickets' 'feedback-assignee'}}</th>
              <th width="14%" style="max-width:20%;vertical-align:middle">{{agile_lng_translate 'tickets' 'feedback-time'}}</th>
              <th width="10%" style="text-align:center;max-width:10%;vertical-align:middle">{{agile_lng_translate 'tickets' 'feedback-feedback'}}</th>
              <th width="25%" style="vertical-align:middle">{{agile_lng_translate 'tickets' 'feedback-feedback-comment'}}</th>
              <th width="5%" style="max-width:20%;vertical-align:middle">{{agile_lng_translate 'tickets' 'feedback-ticket'}}</th>
              <th width="5%" style="max-width:20%;vertical-align:middle"></th>
          </tr>             
        </thead>  
        <tbody id="ticket-feedback-log-model-list"></tbody>
    </table>

{{/if}}        
</script>
<script id="ticket-feedback-log-model-template" type="text/html">
<td style="vertical-align:middle">
	
    <div class="avatar text-capitalize agile-img m-r-sm " data-toggle="tooltip" data-container="body" data-placement="bottom" title="{{first_name}} {{last_name}}" style="width:196px !important;
    overflow: hidden; border-radius: 0px;
    text-overflow: ellipsis;word-break:break-word">
                
        {{#if contact_id}}
                <a href="#contact/{{contact_id}}"  data="{{contact_id}}" ><img class="user-img" style="height:34px;width: 34px;border-radius: 0px !important;" src="{{img_url}}" target="_blank"/>&nbsp;&nbsp;&nbsp;&nbsp;
        {{else}}
                <a href="#contact/{{contact_id}}"  data="{{contact_id}}"><img class="user-img" target="_blank"  style="height:34px;width: 34px; border-radius: 0px !important;" src="{{defaultGravatarurl 20}}"/>&nbsp;&nbsp;&nbsp;&nbsp;
        {{/if}} 
    
                {{first_name}} {{last_name}}  </a>
    </div>

    </td>

    <td class="text-capitalize" style="vertical-align:middle;">
    <div class="line-clamp line-clamp-3" style="word-break:break-word;">
          {{#if assignee_name}}{{assignee_name}}{{else}}-{{/if}}                      
    </div>
    </td>
    <td  style="vertical-align:middle;">

         <time class="time-ago" value="{{created_time}}" datetime="{{epochToHumanDate "" created_time}}">{{epochToHumanDate "ddd mmm dd yyyy HH:MM:ss" created_time}}</time>                       
    </td>  
    <td style="text-align:center;vertical-align:middle;">
        
        {{#if feedback}}
        <img src = "/img/agile-emoj{{feedback}}-1.png"  style="width:30px;"/><br/>
          {{return_feedback_title feedback}}
        {{/if}}                      
    </td>
    <td style="vertical-align:middle">                   
       {{#if_equals feedback_comment ""}}
       <div id="recent-reply-notes" class="recent-reply-notes">
              {{agile_lng_translate 'tickets' 'feedback-nocomment'}} 
            </div>
       {{else}}
      <a href="" class="ticket-feedback-comment" data-id="{{id}}">
      <div class="ccemail feedback_comment overflow-hidden line-clamp line-clamp-3 no-wrap" style="word-break:break-word">
               {{feedback_comment}}
      </div>
      </a> 

       {{/if_equals}}     </td>

      <td style="vertical-align:middle">
        <a href="#ticket/{{ticket_id}}"  style="color:#23b7e5" target="_blank">#{{ticket_id}}</a>     
     </td>           
    
     <td  style="vertical-align:middle" id="ticket_note" data-id="{{id}}">        
          <a href="" class="ticket-feedback-notes text-info" data-id="{{id}}"><i class="fa fa-file-text-o"></i></a>      
      </td>  
      
	</div>
</div>
</div>

</script>

<script id="ticket-feedback-group-template" type="text/html">
 <option value="0">{{agile_lng_translate 'tickets' 'feedback-allgroups'}}</option>
{{#each this}}
    <option value="{{id}}" group_id="{{id}}">{{group_name}}</option>
{{/each}}
<option role='separator' disabled>------------------------------------------------------</option>
{{#each this}}
  <optgroup data-group-id="{{id}}" data-group-email="{{group_email}}" label="{{group_name}}">
    {{#group_users}}
      <option data-assignee-id="{{id}}" value="{{../id}}">
        {{name}}
      </option>
    {{/group_users}}
  </optgroup>
{{/each}}
</script>


<!--<script id="ticket-feedback-popup-template" type="text/html">
<div id="ticket-feedback-comment" class="ticket-feedback-comment animated popup-fadeInUp" style=style="max-height: {{#if_equals feedback_comment ""}}170px;{{else}}270px;{{/if_equals}};">
    <div class="row m-n mar-btm-md">
          <div class="col-md-12 p-b-sm">
            <div class="col-md-12 last-notes-drp-dwn p-b-sm">  
            {{#if_equals feedback_comment ""}}
       <div id="recent-reply-notes" class="recent-reply-notes">
              No comment available. 
            </div>
       {{else}}
      
      <div style="width:100px" class="text-e">
               {{{replace_newline_with_br_feedback feedback_comment}}}
            </div>
       {{/if_equals}}
          </div>
</script>
  -->

<script id="ticket-note-feedback-modal-template" type="text/html">
<div class="modal fade infoModal" id="ticket_note_feedback_modal">
  <div class="modal-dialog">
      <div class="modal-content">
      <div class="modal-header">
          <button class="close" data-dismiss="modal">x</button>
          <h3>Ticket Details</h3>
      </div>
      <div class="modal-body">
      <div class="word-break-all bold-text" style="margin-bottom:5px;text-weight:bold">
      <a href="#ticket/{{ticket_id}}" target="_blank"> # {{ticket_id}}</a>
       </div>
       <div class="word-break-all" style="margin-bottom:5px;">
        <span class="bold-text">{{agile_lng_translate 'tickets' 'feedback-subject'}}:</span> {{ticket_subject}}
       </div>
       <div class="word-break-all" style="margin-bottom:5px;">
       <span class="bold-text">{{agile_lng_translate 'tickets' 'feedback-created-time'}}:</span> {{epochToHumanDate  "" note_created_time}}
       </div>

       <hr>
       <div style="margin-bottom:5px;word-break: break-word;">
        {{{note}}}
       </div>
      </div> 
  </div>
</div>
</script>

<script id="ticket-feedback-comment-modal-template" type="text/html">
<div class="modal fade infoModal" id="ticket_note_feedback_modal">
  <div class="modal-dialog">
      <div class="modal-content">
      <div class="modal-header">
          <button class="close" data-dismiss="modal">x</button>
          <h3>{{agile_lng_translate 'tickets' 'feedback-feedback-comment'}}</h3>
      </div>
      <div class="modal-body">
       <div  style="margin-bottom:5px;word-break: break-word;">
        {{{replace_newline_with_br_feedback feedback_comment}}}
       </div>
      </div> 
  </div>
</div>
</script>
